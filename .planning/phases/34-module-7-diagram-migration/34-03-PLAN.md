---
phase: 34-module-7-diagram-migration
plan: 03
type: execute
wave: 3
depends_on: ["34-01", "34-02"]
files_modified:
  - src/components/diagrams/module7/CloudRunEventDiagrams.tsx
  - src/components/diagrams/module7/MonitoringDiagrams.tsx
  - src/components/diagrams/module7/index.ts
  - src/content/course/07-module-7/01-cloud-sql-setup.mdx
  - src/content/course/07-module-7/02-debezium-server-pubsub.mdx
  - src/content/course/07-module-7/03-iam-workload-identity.mdx
  - src/content/course/07-module-7/04-dataflow-bigquery.mdx
  - src/content/course/07-module-7/05-cloud-run-event-driven.mdx
  - src/content/course/07-module-7/06-cloud-monitoring.mdx
autonomous: true

must_haves:
  truths:
    - "User can see Cloud Run event-driven processing diagrams"
    - "User can see auto-scaling behavior sequence"
    - "User can see end-to-end monitoring hierarchy"
    - "User can see monitoring points for each GCP service"
    - "All 6 Module 7 MDX files import glass components instead of Mermaid"
    - "No Mermaid code blocks remain in Module 7 MDX files"
    - "All glass diagrams render correctly in browser"
  artifacts:
    - path: "src/components/diagrams/module7/CloudRunEventDiagrams.tsx"
      provides: "3 diagrams for lesson 05"
      exports: ["PubSubEventarcCloudRunDiagram", "AutoScalingBehaviorSequence", "EndToEndEventProcessingSequence"]
    - path: "src/components/diagrams/module7/MonitoringDiagrams.tsx"
      provides: "3 diagrams for lesson 06"
      exports: ["MonitoringComponentsDiagram", "MonitoringPointsHierarchyDiagram", "AlertFlowDiagram"]
    - path: "src/components/diagrams/module7/index.ts"
      provides: "Barrel export for all Module 7 diagrams"
      exports: ["*"]
  key_links:
    - from: "src/content/course/07-module-7/*.mdx"
      to: "src/components/diagrams/module7"
      via: "import statement at top of MDX"
      pattern: "import.*from.*components/diagrams/module7"
    - from: "src/content/course/07-module-7/*.mdx"
      to: "Mermaid"
      via: "should NOT exist after migration"
      pattern: "Mermaid chart"
---

<objective>
Create Cloud Run event-driven and monitoring diagrams, create barrel export, and migrate all 6 Module 7 MDX files to glass components.

Purpose: Complete Module 7 diagram migration by creating the final 6 diagrams for lessons 05-06 (event-driven processing, monitoring hierarchy), creating the barrel export, and updating all MDX files to import and use glass components instead of Mermaid.

Output:
- CloudRunEventDiagrams.tsx with 3 diagrams
- MonitoringDiagrams.tsx with 3 diagrams
- index.ts barrel export for all Module 7 diagrams
- All 6 MDX files updated with glass component imports and usage
</objective>

<execution_context>
@/Users/levoely/.claude/get-shit-done/workflows/execute-plan.md
@/Users/levoely/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34-module-7-diagram-migration/34-RESEARCH.md

# Reference primitives
@src/components/diagrams/primitives/FlowNode.tsx
@src/components/diagrams/primitives/Arrow.tsx
@src/components/diagrams/primitives/DiagramContainer.tsx
@src/components/diagrams/primitives/SequenceDiagram.tsx
@src/components/diagrams/primitives/Tooltip.tsx

# Source MDX files
@src/content/course/07-module-7/05-cloud-run-event-driven.mdx
@src/content/course/07-module-7/06-cloud-monitoring.mdx

# Reference for MDX migration pattern
@src/content/course/06-module-6/01-advanced-python-consumer.mdx
@.planning/phases/33-module-6-diagram-migration/33-04-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CloudRunEventDiagrams.tsx (3 diagrams)</name>
  <files>src/components/diagrams/module7/CloudRunEventDiagrams.tsx</files>
  <action>
Create CloudRunEventDiagrams.tsx with 3 diagrams for lesson 05.

**1. PubSubEventarcCloudRunDiagram** (horizontal flow showing serverless event routing)

Shows: Debezium Server → Pub/Sub → Eventarc → Cloud Run

```typescript
import React from 'react';
import { FlowNode } from '../primitives/FlowNode';
import { Arrow } from '../primitives/Arrow';
import { DiagramContainer } from '../primitives/DiagramContainer';
import { Tooltip } from '../primitives/Tooltip';

export function PubSubEventarcCloudRunDiagram() {
  return (
    <DiagramContainer
      title="Pub/Sub → Eventarc → Cloud Run"
      color="emerald"
      description="Serverless event-driven обработка CDC событий"
    >
      <div className="flex flex-col md:flex-row items-center justify-center gap-3">
        <Tooltip content="Debezium Server публикует CDC события в Pub/Sub topics">
          <FlowNode variant="connector">
            Debezium<br/>Server
          </FlowNode>
        </Tooltip>

        <Arrow direction="right" label="CDC Events" />

        <Tooltip content="Pub/Sub Topics с ordering enabled для сохранения порядка">
          <FlowNode variant="gcp-messaging">
            Pub/Sub<br/>Topic
          </FlowNode>
        </Tooltip>

        <Arrow direction="right" label="Push subscription" />

        <Tooltip content={
          <div>
            <p className="font-semibold mb-1">Eventarc Trigger</p>
            <p className="text-sm">Связывает Pub/Sub топик с Cloud Run сервисом автоматически</p>
            <p className="text-sm mt-1">Filter: event type, source, attributes</p>
          </div>
        }>
          <FlowNode variant="gcp-compute">
            Eventarc<br/>Trigger
          </FlowNode>
        </Tooltip>

        <Arrow direction="right" label="HTTP POST" />

        <Tooltip content={
          <div>
            <p className="font-semibold mb-1">Cloud Run Service</p>
            <p className="text-sm">Serverless контейнер с auto-scaling</p>
            <p className="text-sm mt-1">Scale to zero при отсутствии трафика</p>
            <p className="text-sm mt-1">Concurrency: 80 requests/container</p>
          </div>
        }>
          <FlowNode variant="gcp-compute">
            Cloud Run<br/>Service
          </FlowNode>
        </Tooltip>
      </div>

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-emerald-200/70">
        <p>Pub/Sub base64-кодирует данные в message.data — нужно декодировать → JSON</p>
        <p className="mt-1">min-instances=0 позволяет scale to zero (cost optimization)</p>
      </div>
    </DiagramContainer>
  );
}
```

**2. AutoScalingBehaviorSequence** (sequence diagram showing dynamic scaling)

Shows: Pub/Sub → Cloud Run instances appearing based on concurrency

```typescript
import { SequenceDiagram } from '../primitives/SequenceDiagram';

export function AutoScalingBehaviorSequence() {
  return (
    <DiagramContainer
      title="Auto-Scaling Behavior"
      color="amber"
      description="Cloud Run масштабируется на основе concurrency"
    >
      <SequenceDiagram
        actors={[
          {
            id: 'pubsub',
            label: 'Pub/Sub Messages',
            variant: 'queue',
            tooltip: "Backlog of unprocessed messages"
          },
          {
            id: 'cr1',
            label: 'Cloud Run Instance 1',
            variant: 'service',
            tooltip: "First instance (always running if min-instances=1)"
          },
          {
            id: 'cr2',
            label: 'Cloud Run Instance 2',
            variant: 'service',
            tooltip: "Auto-scaled instance when concurrency > 80"
          },
          {
            id: 'cr3',
            label: 'Cloud Run Instance 3',
            variant: 'service',
            tooltip: "Additional instance for high load"
          }
        ]}
        messages={[
          {
            id: '1',
            from: 'pubsub',
            to: 'cr1',
            label: '50 messages',
            variant: 'async',
            tooltip: "Concurrency < 80 → один instance достаточно"
          },
          {
            id: '2',
            from: 'pubsub',
            to: 'cr1',
            label: '100 messages (overload)',
            variant: 'async',
            tooltip: "Concurrency > 80 → Cloud Run создает новый instance"
          },
          {
            id: '3',
            from: 'pubsub',
            to: 'cr2',
            label: 'Scale up (new instance)',
            variant: 'async',
            tooltip: "Instance 2 появляется через ~10 секунд"
          },
          {
            id: '4',
            from: 'pubsub',
            to: 'cr1',
            label: '200 messages',
            variant: 'async'
          },
          {
            id: '5',
            from: 'pubsub',
            to: 'cr2',
            label: '200 messages',
            variant: 'async'
          },
          {
            id: '6',
            from: 'pubsub',
            to: 'cr3',
            label: 'Scale up (3rd instance)',
            variant: 'async',
            tooltip: "Max instances ограничен в конфигурации (default: 100)"
          }
        ]}
        messageSpacing={45}
      />

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-amber-200/70">
        <p>Cloud Run масштабируется автоматически на основе:</p>
        <ul className="mt-1 space-y-1">
          <li>• Concurrency: requests на контейнер (default: 80)</li>
          <li>• CPU/Memory utilization (если указаны в конфигурации)</li>
        </ul>
      </div>
    </DiagramContainer>
  );
}
```

**3. EndToEndEventProcessingSequence** (complex sequence with 6 actors)

Shows: Cloud SQL → Debezium → Pub/Sub → Eventarc → Cloud Run → External API

```typescript
export function EndToEndEventProcessingSequence() {
  return (
    <DiagramContainer
      title="End-to-End Event Processing"
      color="purple"
      description="Полный цикл от INSERT в Cloud SQL до вызова external API"
    >
      <SequenceDiagram
        actors={[
          {
            id: 'cloudsql',
            label: 'Cloud SQL',
            variant: 'database',
            tooltip: "PostgreSQL с logical decoding"
          },
          {
            id: 'debezium',
            label: 'Debezium Server',
            variant: 'service',
            tooltip: "CDC engine reading WAL"
          },
          {
            id: 'pubsub',
            label: 'Pub/Sub',
            variant: 'queue',
            tooltip: "Message broker"
          },
          {
            id: 'eventarc',
            label: 'Eventarc',
            variant: 'service',
            tooltip: "Event routing"
          },
          {
            id: 'cloudrun',
            label: 'Cloud Run',
            variant: 'service',
            tooltip: "Event handler"
          },
          {
            id: 'api',
            label: 'External API',
            variant: 'external',
            tooltip: "CRM, Email, Analytics"
          }
        ]}
        messages={[
          {
            id: '1',
            from: 'cloudsql',
            to: 'cloudsql',
            label: 'INSERT order',
            variant: 'sync',
            tooltip: "Приложение создает новый заказ"
          },
          {
            id: '2',
            from: 'cloudsql',
            to: 'debezium',
            label: 'WAL event',
            variant: 'async',
            tooltip: "Debezium читает через replication slot"
          },
          {
            id: '3',
            from: 'debezium',
            to: 'pubsub',
            label: 'CDC event (JSON)',
            variant: 'async',
            tooltip: "Debezium публикует в cdc.public.orders topic"
          },
          {
            id: '4',
            from: 'pubsub',
            to: 'eventarc',
            label: 'Push message',
            variant: 'async',
            tooltip: "Pub/Sub push subscription → Eventarc"
          },
          {
            id: '5',
            from: 'eventarc',
            to: 'cloudrun',
            label: 'HTTP POST (base64 data)',
            variant: 'sync',
            tooltip: "Eventarc вызывает Cloud Run endpoint"
          },
          {
            id: '6',
            from: 'cloudrun',
            to: 'cloudrun',
            label: 'Decode & Process',
            variant: 'sync',
            tooltip: "Декодирование base64, parse JSON, business logic"
          },
          {
            id: '7',
            from: 'cloudrun',
            to: 'api',
            label: 'API call (customer notification)',
            variant: 'sync',
            tooltip: "Отправка уведомления через external API"
          },
          {
            id: '8',
            from: 'api',
            to: 'cloudrun',
            label: 'Success response',
            variant: 'response'
          },
          {
            id: '9',
            from: 'cloudrun',
            to: 'eventarc',
            label: 'HTTP 200 OK',
            variant: 'response',
            tooltip: "Cloud Run возвращает успех → Pub/Sub acks message"
          }
        ]}
        messageSpacing={50}
      />

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-purple-200/70">
        <p className="font-semibold mb-1">Latency breakdown (typical):</p>
        <ul className="space-y-1">
          <li>• Cloud SQL → Debezium: 100-500ms (WAL polling interval)</li>
          <li>• Debezium → Pub/Sub: 10-50ms (network latency)</li>
          <li>• Pub/Sub → Cloud Run: 50-200ms (cold start если scale from zero)</li>
          <li>• Cloud Run → External API: depends on API (50-500ms)</li>
          <li>• <span className="font-semibold">Total: ~500-2000ms end-to-end</span></li>
        </ul>
      </div>
    </DiagramContainer>
  );
}
```

**Pattern used:**
- Horizontal flow for architecture
- Sequence diagram for auto-scaling behavior (3 instances appearing)
- Complex 6-actor sequence for end-to-end flow with latency breakdown
- Russian tooltips with technical details
  </action>
  <verify>
- File exists at src/components/diagrams/module7/CloudRunEventDiagrams.tsx
- Exports 3 diagram components: PubSubEventarcCloudRunDiagram, AutoScalingBehaviorSequence, EndToEndEventProcessingSequence
- Uses gcp-messaging, gcp-compute variants
- AutoScalingBehaviorSequence shows 3 Cloud Run instances
- EndToEndEventProcessingSequence has 6 actors, 9 messages
- All tooltips in Russian
- No TypeScript errors
  </verify>
  <done>
3 Cloud Run event-driven diagrams created showing serverless processing, auto-scaling, and end-to-end flow
  </done>
</task>

<task type="auto">
  <name>Task 2: Create MonitoringDiagrams.tsx (3 diagrams)</name>
  <files>src/components/diagrams/module7/MonitoringDiagrams.tsx</files>
  <action>
Create MonitoringDiagrams.tsx with 3 diagrams for lesson 06.

**1. MonitoringComponentsDiagram** (multi-layer architecture showing all components)

Shows all services in CDC pipeline with monitoring points highlighted

```typescript
import React from 'react';
import { FlowNode } from '../primitives/FlowNode';
import { Arrow } from '../primitives/Arrow';
import { DiagramContainer } from '../primitives/DiagramContainer';
import { Tooltip } from '../primitives/Tooltip';

export function MonitoringComponentsDiagram() {
  return (
    <DiagramContainer
      title="Компоненты для мониторинга"
      color="rose"
      description="End-to-end observability для CDC pipeline"
    >
      <div className="space-y-4">
        {/* Pipeline flow */}
        <div className="flex flex-wrap items-center justify-center gap-2">
          <Tooltip content="Cloud SQL CPU, Disk, Replication lag">
            <FlowNode variant="gcp-database" size="sm">Cloud SQL</FlowNode>
          </Tooltip>
          <Arrow direction="right" label="WAL" />
          <Tooltip content="Debezium system lag, queue capacity">
            <FlowNode variant="connector" size="sm">Debezium</FlowNode>
          </Tooltip>
          <Arrow direction="right" />
          <Tooltip content="Pub/Sub oldest unacked message age, backlog">
            <FlowNode variant="gcp-messaging" size="sm">Pub/Sub</FlowNode>
          </Tooltip>
          <Arrow direction="right" />
          <Tooltip content="Dataflow worker utilization, element count">
            <FlowNode variant="gcp-compute" size="sm">Dataflow</FlowNode>
          </Tooltip>
          <Arrow direction="right" />
          <Tooltip content="BigQuery streaming inserts, DML queries">
            <FlowNode variant="gcp-storage" size="sm">BigQuery</FlowNode>
          </Tooltip>
        </div>

        {/* Monitoring layer */}
        <div className="flex items-center justify-center gap-2 pt-3 border-t border-white/10">
          <FlowNode variant="gcp-monitoring" size="sm">Cloud Monitoring</FlowNode>
          <Arrow direction="right" />
          <FlowNode variant="app" size="sm">Unified Dashboard</FlowNode>
          <Arrow direction="right" />
          <FlowNode variant="gcp-monitoring" size="sm">Alert Policies</FlowNode>
        </div>
      </div>
    </DiagramContainer>
  );
}
```

**2. MonitoringPointsHierarchyDiagram** (flattened grid showing metrics per service)

Grid layout with 3 columns: Cloud SQL | Debezium | Pub/Sub metrics

```typescript
export function MonitoringPointsHierarchyDiagram() {
  return (
    <DiagramContainer
      title="Monitoring Points по компонентам"
      color="amber"
      description="Ключевые метрики для каждого сервиса CDC pipeline"
    >
      <div className="grid md:grid-cols-3 gap-4">
        {/* Cloud SQL Metrics */}
        <div className="space-y-2">
          <h3 className="text-sm font-semibold text-purple-200">Cloud SQL</h3>
          <Tooltip content="CPU utilization > 80% → scale up instance tier">
            <FlowNode variant="gcp-monitoring" size="sm">
              CPU/Memory
            </FlowNode>
          </Tooltip>
          <Tooltip content="WAL bloat из-за неактивного replication slot">
            <FlowNode variant="gcp-monitoring" size="sm">
              Disk Utilization
            </FlowNode>
          </Tooltip>
          <Tooltip content="pg_wal_lsn_diff показывает отставание слота">
            <FlowNode variant="gcp-monitoring" size="sm">
              Replication Lag
            </FlowNode>
          </Tooltip>
        </div>

        {/* Debezium Metrics */}
        <div className="space-y-2">
          <h3 className="text-sm font-semibold text-emerald-200">Debezium Server</h3>
          <Tooltip content="MilliSecondsBehindSource > 60000 → alert">
            <FlowNode variant="gcp-monitoring" size="sm">
              System Lag
            </FlowNode>
          </Tooltip>
          <Tooltip content="Throughput в событиях в секунду">
            <FlowNode variant="gcp-monitoring" size="sm">
              Events/sec
            </FlowNode>
          </Tooltip>
          <Tooltip content="QueueRemainingCapacity < 20% → backpressure">
            <FlowNode variant="gcp-monitoring" size="sm">
              Queue Capacity
            </FlowNode>
          </Tooltip>
        </div>

        {/* Pub/Sub Metrics */}
        <div className="space-y-2">
          <h3 className="text-sm font-semibold text-amber-200">Pub/Sub</h3>
          <Tooltip content="oldest_unacked_message_age > 300s → consumer lag">
            <FlowNode variant="gcp-monitoring" size="sm">
              Message Age
            </FlowNode>
          </Tooltip>
          <Tooltip content="num_undelivered_messages — размер backlog">
            <FlowNode variant="gcp-monitoring" size="sm">
              Backlog Size
            </FlowNode>
          </Tooltip>
          <Tooltip content="dead_letter_message_count > 0 → poison messages">
            <FlowNode variant="gcp-monitoring" size="sm">
              DLQ Count
            </FlowNode>
          </Tooltip>
        </div>
      </div>

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-amber-200/70">
        <p>System lag — ключевая метрика для real-time CDC (задержка обработки)</p>
      </div>
    </DiagramContainer>
  );
}
```

**3. AlertFlowDiagram** (decision tree showing alert hierarchy)

Shows: Metric → Condition → Alert Severity → Action

```typescript
export function AlertFlowDiagram() {
  return (
    <DiagramContainer
      title="Alert Flow и Severity Levels"
      color="rose"
      description="Иерархия алертов от Warning до Critical"
    >
      <div className="space-y-4">
        {/* Critical Alerts */}
        <DiagramContainer title="Critical (P0)" color="rose">
          <div className="space-y-2 text-xs">
            <div className="flex items-center gap-2">
              <Tooltip content="Replication slot lag > 10GB → WAL bloat риск">
                <FlowNode variant="gcp-monitoring" size="sm" className="border-rose-500">
                  Cloud SQL Lag
                </FlowNode>
              </Tooltip>
              <Arrow direction="right" />
              <FlowNode variant="app" size="sm">PagerDuty</FlowNode>
            </div>
            <div className="flex items-center gap-2">
              <Tooltip content="Debezium system lag > 5 минут">
                <FlowNode variant="gcp-monitoring" size="sm" className="border-rose-500">
                  Debezium Lag
                </FlowNode>
              </Tooltip>
              <Arrow direction="right" />
              <FlowNode variant="app" size="sm">PagerDuty</FlowNode>
            </div>
          </div>
        </DiagramContainer>

        {/* Warning Alerts */}
        <DiagramContainer title="Warning (P1)" color="amber">
          <div className="space-y-2 text-xs">
            <div className="flex items-center gap-2">
              <Tooltip content="Pub/Sub oldest unacked message age > 5 минут">
                <FlowNode variant="gcp-monitoring" size="sm" className="border-amber-500">
                  Pub/Sub Age
                </FlowNode>
              </Tooltip>
              <Arrow direction="right" />
              <FlowNode variant="app" size="sm">Slack</FlowNode>
            </div>
            <div className="flex items-center gap-2">
              <Tooltip content="Dataflow worker CPU > 80%">
                <FlowNode variant="gcp-monitoring" size="sm" className="border-amber-500">
                  Worker CPU
                </FlowNode>
              </Tooltip>
              <Arrow direction="right" />
              <FlowNode variant="app" size="sm">Slack</FlowNode>
            </div>
          </div>
        </DiagramContainer>

        {/* Info Alerts */}
        <DiagramContainer title="Info (P2)" color="blue">
          <div className="space-y-2 text-xs">
            <div className="flex items-center gap-2">
              <Tooltip content="Debezium snapshot started">
                <FlowNode variant="gcp-monitoring" size="sm" className="border-blue-500">
                  Snapshot Event
                </FlowNode>
              </Tooltip>
              <Arrow direction="right" />
              <FlowNode variant="app" size="sm">Email</FlowNode>
            </div>
          </div>
        </DiagramContainer>
      </div>

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-rose-200/70">
        <p className="font-semibold mb-1">Alert thresholds:</p>
        <ul className="space-y-1">
          <li>• Critical: immediate action required (page on-call)</li>
          <li>• Warning: investigate within 1 hour (Slack notification)</li>
          <li>• Info: awareness only (email digest)</li>
        </ul>
      </div>
    </DiagramContainer>
  );
}
```

**Pattern used:**
- Multi-layer architecture showing all components
- Flattened 3-column grid for monitoring points (not nested)
- Alert hierarchy with severity levels (Critical/Warning/Info)
- Color-coded borders for alert severity
- Russian tooltips with threshold values
  </action>
  <verify>
- File exists at src/components/diagrams/module7/MonitoringDiagrams.tsx
- Exports 3 diagram components: MonitoringComponentsDiagram, MonitoringPointsHierarchyDiagram, AlertFlowDiagram
- Uses gcp-monitoring variant extensively
- MonitoringPointsHierarchyDiagram uses 3-column grid layout
- AlertFlowDiagram shows 3 severity levels with color coding
- All tooltips in Russian
- No TypeScript errors
  </verify>
  <done>
3 monitoring diagrams created showing end-to-end observability, monitoring points per service, and alert hierarchy
  </done>
</task>

<task type="auto">
  <name>Task 3: Create index.ts barrel export</name>
  <files>src/components/diagrams/module7/index.ts</files>
  <action>
Create index.ts barrel export for all Module 7 diagrams.

```typescript
// Lesson 01 - Cloud SQL Setup
export { CloudSqlCdcArchitectureDiagram } from './CloudSqlDiagrams';

// Lesson 02 - Debezium Server with Pub/Sub
export {
  TraditionalKafkaArchitectureDiagram,
  KafkalessArchitectureDiagram,
  DebeziumServerInternalDiagram
} from './DebeziumServerDiagrams';

// Lesson 03 - IAM and Workload Identity
export { WorkloadIdentityFlowDiagram } from './IamWorkloadDiagrams';

// Lesson 04 - Dataflow to BigQuery
export {
  CdcToBigQueryDiagram,
  DataflowEndToEndWorkflowDiagram
} from './DataflowBigQueryDiagrams';

// Lesson 05 - Cloud Run Event-Driven
export {
  PubSubEventarcCloudRunDiagram,
  AutoScalingBehaviorSequence,
  EndToEndEventProcessingSequence
} from './CloudRunEventDiagrams';

// Lesson 06 - End-to-End Monitoring
export {
  MonitoringComponentsDiagram,
  MonitoringPointsHierarchyDiagram,
  AlertFlowDiagram
} from './MonitoringDiagrams';
```

Total exports: 14 diagram components across 6 lessons
  </action>
  <verify>
- File exists at src/components/diagrams/module7/index.ts
- Exports all 14 diagram components (1+3+1+2+3+3)
- Organized by lesson with comments
- No TypeScript errors
  </verify>
  <done>
Barrel export created with all 14 Module 7 diagrams
  </done>
</task>

<task type="auto">
  <name>Task 4: Migrate all 6 MDX files to glass components</name>
  <files>
    src/content/course/07-module-7/01-cloud-sql-setup.mdx
    src/content/course/07-module-7/02-debezium-server-pubsub.mdx
    src/content/course/07-module-7/03-iam-workload-identity.mdx
    src/content/course/07-module-7/04-dataflow-bigquery.mdx
    src/content/course/07-module-7/05-cloud-run-event-driven.mdx
    src/content/course/07-module-7/06-cloud-monitoring.mdx
  </files>
  <action>
For each MDX file, perform these changes:

**1. Replace Mermaid import with glass component imports:**

Remove:
```tsx
import { Mermaid } from '../../../components/Mermaid.tsx';
```

Add (example for lesson 01):
```tsx
import { CloudSqlCdcArchitectureDiagram } from '../../../components/diagrams/module7';
```

**2. Replace each Mermaid block with glass component:**

Remove:
```tsx
<Mermaid chart={`...`} client:visible />
```

Add:
```tsx
<CloudSqlCdcArchitectureDiagram client:load />
```

**Mapping of Mermaid blocks to components per file:**

| File | Mermaid Count | Components |
|------|---------------|------------|
| 01-cloud-sql-setup.mdx | 1 | CloudSqlCdcArchitectureDiagram |
| 02-debezium-server-pubsub.mdx | 3 | TraditionalKafkaArchitectureDiagram, KafkalessArchitectureDiagram, DebeziumServerInternalDiagram |
| 03-iam-workload-identity.mdx | 1 | WorkloadIdentityFlowDiagram |
| 04-dataflow-bigquery.mdx | 2 | CdcToBigQueryDiagram, DataflowEndToEndWorkflowDiagram |
| 05-cloud-run-event-driven.mdx | 3 | PubSubEventarcCloudRunDiagram, AutoScalingBehaviorSequence, EndToEndEventProcessingSequence |
| 06-cloud-monitoring.mdx | 4 | MonitoringComponentsDiagram, MonitoringPointsHierarchyDiagram, AlertFlowDiagram (+ 1 more if exists) |

**IMPORTANT:**
- Use `client:load` directive (not `client:visible`) for React hydration
- Import path: `../../../components/diagrams/module7` (3 levels up from MDX)
- Place component where Mermaid block was (maintain document flow)
- Keep any surrounding text/context unchanged
- Handle all Mermaid blocks in each file (some files may have 3-4 diagrams)
  </action>
  <verify>
- All 6 MDX files updated
- No Mermaid imports remain: `grep -r "Mermaid" src/content/course/07-module-7/`
- No Mermaid chart blocks remain: `grep -r "Mermaid chart" src/content/course/07-module-7/`
- All glass component imports present
- Dev server renders all 6 lessons without errors: `npm run dev`
- Total 14 glass component usages across 6 files
  </verify>
  <done>
All 6 Module 7 MDX files migrated from Mermaid to glass components, zero Mermaid code blocks remain
  </done>
</task>

</tasks>

<verification>
- CloudRunEventDiagrams.tsx exists with 3 diagrams
- MonitoringDiagrams.tsx exists with 3 diagrams
- index.ts exists with all 14 diagram exports
- All 6 MDX files import from '../../../components/diagrams/module7'
- Zero Mermaid imports in Module 7: `grep -c "Mermaid" src/content/course/07-module-7/*.mdx` returns 0
- Zero Mermaid chart blocks: `grep -c "Mermaid chart" src/content/course/07-module-7/*.mdx` returns 0
- Dev server starts without errors
- All 6 lessons render correctly with interactive diagrams
- TypeScript compiles without errors
- All 14 diagrams use GCP brand colors
</verification>

<success_criteria>
- 6 additional diagrams created (3 Cloud Run + 3 Monitoring)
- Barrel export includes all 14 diagrams
- All 6 MDX files use glass components
- Zero Mermaid code in Module 7
- All diagrams render with tooltips
- Requirements MOD7-01 through MOD7-04 complete
- Module 7 diagram migration 100% complete (14 diagrams migrated)
- GCP-specific variants established for future use
</success_criteria>

<output>
After completion, create `.planning/phases/34-module-7-diagram-migration/34-03-SUMMARY.md`
</output>
