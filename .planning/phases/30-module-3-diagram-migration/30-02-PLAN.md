---
phase: 30-module-3-diagram-migration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/diagrams/module3/BinlogWalComparisonDiagrams.tsx
  - src/components/diagrams/module3/SchemaHistoryDiagrams.tsx
  - src/components/diagrams/module3/AuroraParameterDiagrams.tsx
  - src/components/diagrams/module3/EnhancedBinlogDiagrams.tsx
autonomous: true

must_haves:
  truths:
    - "User can see detailed binlog vs WAL comparison diagrams with event format differences"
    - "User can see schema history flow and recovery path diagrams"
    - "User can see Aurora parameter hierarchy and setup process diagrams"
    - "User can see Enhanced Binlog architecture diagrams with storage tier"
  artifacts:
    - path: "src/components/diagrams/module3/BinlogWalComparisonDiagrams.tsx"
      provides: "Detailed binlog vs WAL comparison (5 diagrams from lesson 05)"
      exports: ["DetailedArchitectureComparisonDiagram", "EventFormatComparisonDiagram", "ReplicationModesDiagram", "SlotVsBinlogDiagram", "CdcReadinessDiagram"]
    - path: "src/components/diagrams/module3/SchemaHistoryDiagrams.tsx"
      provides: "Schema history and recovery diagrams (3 diagrams from lesson 06)"
      exports: ["SchemaHistoryFlowDiagram", "SchemaRecoveryPathsDiagram", "SchemaHistoryCorruptionDiagram"]
    - path: "src/components/diagrams/module3/AuroraParameterDiagrams.tsx"
      provides: "Aurora parameter configuration (2 diagrams from lesson 07)"
      exports: ["ParameterHierarchyDiagram", "AuroraSetupProcessDiagram"]
    - path: "src/components/diagrams/module3/EnhancedBinlogDiagrams.tsx"
      provides: "Enhanced Binlog architecture (4 diagrams from lesson 08)"
      exports: ["EnhancedBinlogArchitectureDiagram", "StorageTierDiagram", "EnhancedVsStandardDiagram", "RetentionComparisonDiagram"]
  key_links:
    - from: "src/components/diagrams/module3/BinlogWalComparisonDiagrams.tsx"
      to: "src/components/diagrams/primitives"
      via: "imports FlowNode, Arrow, DiagramContainer, DiagramTooltip"
      pattern: "import.*from.*primitives"
---

<objective>
Create glass diagram components for Module 3 lessons 05-08, covering detailed binlog/WAL comparison, schema history, Aurora parameters, and Enhanced Binlog.

Purpose: Replace 14 Mermaid diagrams with interactive glass components that have Russian tooltips explaining MySQL and Aurora CDC concepts.
Output: 4 component files with 14 exported diagram functions ready for MDX integration.
</objective>

<execution_context>
@/Users/levoely/.claude/get-shit-done/workflows/execute-plan.md
@/Users/levoely/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-module-3-diagram-migration/30-RESEARCH.md

# Existing primitives to use
@src/components/diagrams/primitives/FlowNode.tsx
@src/components/diagrams/primitives/Arrow.tsx
@src/components/diagrams/primitives/DiagramContainer.tsx
@src/components/diagrams/primitives/Tooltip.tsx

# Module 2 patterns to follow
@src/components/diagrams/module2/LogicalDecodingDiagrams.tsx
@src/components/diagrams/module2/AuroraParameterDiagrams.tsx

# Source MDX files with Mermaid to convert
@src/content/course/03-module-3/05-binlog-wal-comparison.mdx
@src/content/course/03-module-3/06-schema-history-recovery.mdx
@src/content/course/03-module-3/07-aurora-parameter-groups.mdx
@src/content/course/03-module-3/08-enhanced-binlog-architecture.mdx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BinlogWalComparisonDiagrams and SchemaHistoryDiagrams</name>
  <files>
    src/components/diagrams/module3/BinlogWalComparisonDiagrams.tsx
    src/components/diagrams/module3/SchemaHistoryDiagrams.tsx
  </files>
  <action>
**BinlogWalComparisonDiagrams.tsx** - 5 diagrams from lesson 05:

1. `DetailedArchitectureComparisonDiagram`: Side-by-side deep dive
   - PostgreSQL: WAL segments -> Replication Slots -> pgoutput -> CDC
   - MySQL: Binlog files -> Binary Log -> CDC
   - Use blue for PostgreSQL, emerald for MySQL

2. `EventFormatComparisonDiagram`: Event structure comparison
   - PostgreSQL: LSN-based, page-level changes
   - MySQL: GTID-based, row-level changes
   - Tooltips explaining format implications

3. `ReplicationModesDiagram`: Replication topology comparison
   - PostgreSQL: Streaming replication (physical) vs Logical replication
   - MySQL: Traditional replication vs Group replication
   - Decision tree for choosing mode

4. `SlotVsBinlogDiagram`: Position tracking comparison
   - PostgreSQL: Replication slot with restart_lsn
   - MySQL: Binlog file + position + GTID
   - Tooltip: "Slot гарантирует сохранение WAL, binlog имеет expire timeout"

5. `CdcReadinessDiagram`: CDC configuration comparison
   - PostgreSQL: wal_level=logical required
   - MySQL: binlog_format=ROW required
   - Show what's needed for each database

**SchemaHistoryDiagrams.tsx** - 3 diagrams from lesson 06:

1. `SchemaHistoryFlowDiagram`: Schema history topic flow
   - DDL event -> Connector -> Schema history topic -> Stored schema
   - Tooltip: "Schema history topic хранит все DDL изменения для восстановления структуры"

2. `SchemaRecoveryPathsDiagram`: Recovery decision tree
   - Schema mismatch detected -> Check schema history -> Paths: found/not found
   - Color-coded paths (emerald for success, rose for failure)

3. `SchemaHistoryCorruptionDiagram`: Corruption recovery flow
   - Corrupted topic -> Stop connector -> Recreate from snapshot
   - Warning indicators for dangerous operations

Use imports pattern from Module 2 components.
  </action>
  <verify>
Files exist and TypeScript compiles without errors:
```bash
npx tsc --noEmit src/components/diagrams/module3/BinlogWalComparisonDiagrams.tsx
npx tsc --noEmit src/components/diagrams/module3/SchemaHistoryDiagrams.tsx
```
  </verify>
  <done>
BinlogWalComparisonDiagrams exports 5 functions, SchemaHistoryDiagrams exports 3 functions, all with Russian tooltips.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create AuroraParameterDiagrams and EnhancedBinlogDiagrams</name>
  <files>
    src/components/diagrams/module3/AuroraParameterDiagrams.tsx
    src/components/diagrams/module3/EnhancedBinlogDiagrams.tsx
  </files>
  <action>
**AuroraParameterDiagrams.tsx** - 2 diagrams from lesson 07:

1. `ParameterHierarchyDiagram`: Parameter group hierarchy
   - Cluster parameter group -> DB parameter group -> Instance
   - Show inheritance and override behavior
   - Tooltip: "Cluster parameters применяются ко всем инстансам, DB parameters можно переопределить"

2. `AuroraSetupProcessDiagram`: Setup steps flow
   - Create cluster -> Configure parameters -> Enable binlog -> Reboot
   - Highlight critical reboot step with animate-pulse (from Phase 29 pattern)
   - Show Aurora-specific parameter names

**EnhancedBinlogDiagrams.tsx** - 4 diagrams from lesson 08:

1. `EnhancedBinlogArchitectureDiagram`: Enhanced Binlog architecture
   - Aurora storage tier (shared) -> Enhanced Binlog layer -> Connector
   - Show separation from compute tier
   - Tooltip: "Enhanced Binlog работает на storage tier, не на compute"

2. `StorageTierDiagram`: Storage architecture detail
   - 6 storage nodes across 3 AZs
   - Binlog replication across nodes
   - Tooltip explaining durability guarantees

3. `EnhancedVsStandardDiagram`: Side-by-side comparison
   - Standard MySQL: Compute-based binlog
   - Aurora Enhanced: Storage-based binlog
   - Highlight performance differences

4. `RetentionComparisonDiagram`: Retention behavior
   - Standard: binlog_expire_logs_seconds
   - Enhanced: aurora_binlog_retention_hours
   - Show default values and limits

Follow Module 2 AuroraParameterDiagrams.tsx patterns.
  </action>
  <verify>
Files exist and TypeScript compiles without errors:
```bash
npx tsc --noEmit src/components/diagrams/module3/AuroraParameterDiagrams.tsx
npx tsc --noEmit src/components/diagrams/module3/EnhancedBinlogDiagrams.tsx
```
  </verify>
  <done>
AuroraParameterDiagrams exports 2 functions, EnhancedBinlogDiagrams exports 4 functions, all with Russian tooltips. Total 14 diagrams for lessons 05-08 complete.
  </done>
</task>

</tasks>

<verification>
After both tasks:
1. All 4 component files exist in src/components/diagrams/module3/
2. TypeScript compilation passes for all files
3. Total of 14 exported diagram functions ready for MDX import
4. All diagrams have Russian tooltips with MySQL/Aurora-specific explanations
</verification>

<success_criteria>
- 14 diagrams created matching research inventory for lessons 05-08
- Components follow established patterns from Module 2
- All tooltips contain contextual Russian explanations
- Code compiles without TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/30-module-3-diagram-migration/30-02-SUMMARY.md`
</output>
