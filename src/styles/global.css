@import "tailwindcss";

:root {
  /* Glass blur values - responsive */
  --glass-blur-sm: 8px;      /* Mobile / light glass */
  --glass-blur-md: 10px;     /* Default */
  --glass-blur-lg: 16px;     /* Desktop / strong glass */

  /* Glass background opacity */
  --glass-bg-opacity: 0.1;
  --glass-bg-elevated-opacity: 0.15;

  /* Glass border */
  --glass-border-color: rgba(255, 255, 255, 0.18);
  --glass-border-radius: 16px;

  /* Glass shadow */
  --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
  --glass-shadow-elevated: 0 12px 48px rgba(31, 38, 135, 0.3);

  /* Sidebar-specific glass (darker for navigation) */
  --sidebar-glass-bg: rgba(0, 0, 0, 0.25);
  --sidebar-glass-blur: 10px;

  /* Light glass for content components (tables) */
  --glass-blur-content: 8px;
  --glass-bg-content-opacity: 0.05;
}

/* Glass panel utilities */
.glass-panel {
  background: rgba(255, 255, 255, var(--glass-bg-opacity));
  /* Safari: hardcoded value (CSS variables don't work in webkit prefix) */
  -webkit-backdrop-filter: blur(10px);
  /* Modern browsers: uses CSS variable */
  backdrop-filter: blur(var(--glass-blur-md));
  border: 1px solid var(--glass-border-color);
  border-radius: var(--glass-border-radius);
  box-shadow: var(--glass-shadow);
}

.glass-panel-elevated {
  background: rgba(255, 255, 255, var(--glass-bg-elevated-opacity));
  /* Safari: hardcoded value (CSS variables don't work in webkit prefix) */
  -webkit-backdrop-filter: blur(16px);
  /* Modern browsers: uses CSS variable */
  backdrop-filter: blur(var(--glass-blur-lg));
  border: 1px solid var(--glass-border-color);
  border-radius: var(--glass-border-radius);
  box-shadow: var(--glass-shadow-elevated);
}

/* Sidebar glass - darker variant for navigation */
.glass-sidebar {
  background: var(--sidebar-glass-bg);
  /* Safari: hardcoded value (CSS variables don't work in webkit prefix) */
  -webkit-backdrop-filter: blur(10px);
  /* Modern browsers: uses CSS variable */
  backdrop-filter: blur(var(--sidebar-glass-blur));
  border-right: 1px solid rgba(255, 255, 255, 0.1);
}

/* Glass card for module cards - strong effect with hover lift */
.glass-card {
  background: rgba(255, 255, 255, var(--glass-bg-opacity));
  /* Safari: hardcoded value (CSS variables don't work in webkit prefix) */
  -webkit-backdrop-filter: blur(16px);
  /* Modern browsers: uses CSS variable */
  backdrop-filter: blur(var(--glass-blur-lg));
  border: 1px solid var(--glass-border-color);
  border-radius: var(--glass-border-radius);
  box-shadow: var(--glass-shadow);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--glass-shadow-elevated);
}

/* Fallback for browsers without backdrop-filter support */
@supports not (backdrop-filter: blur(10px)) {
  .glass-panel,
  .glass-panel-elevated,
  .glass-card {
    background: rgba(30, 30, 50, 0.95);
  }

  .glass-sidebar {
    background: rgba(20, 20, 30, 0.98);
  }
}

/* Accessibility: Reduce transparency when requested */
@media (prefers-reduced-transparency: reduce) {
  :root {
    --glass-bg-opacity: 0.95;
    --glass-bg-elevated-opacity: 0.95;
    --sidebar-glass-bg: rgba(20, 20, 30, 0.98);
  }

  .glass-panel,
  .glass-panel-elevated,
  .glass-sidebar,
  .glass-card {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }

  .prose table {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: rgba(30, 30, 50, 0.95);
  }
}

/* Accessibility: Reduce motion when requested */
@media (prefers-reduced-motion: reduce) {
  .glass-panel,
  .glass-panel-elevated,
  .glass-sidebar,
  .glass-card {
    transition: none;
  }
}

/* Mobile: Reduce blur for performance */
@media (max-width: 1023px) {
  :root {
    --glass-blur-md: 8px;
    --glass-blur-lg: 10px;
    --sidebar-glass-blur: 8px;
  }

  /* Safari mobile: hardcoded reduced values (CSS variables don't work in webkit prefix) */
  .glass-panel {
    -webkit-backdrop-filter: blur(8px);
  }

  .glass-panel-elevated {
    -webkit-backdrop-filter: blur(10px);
  }

  .glass-sidebar {
    -webkit-backdrop-filter: blur(8px);
  }

  .glass-card {
    -webkit-backdrop-filter: blur(10px);
  }

  .prose table {
    -webkit-backdrop-filter: blur(8px);
  }
}

/* Dark theme base */
body {
  @apply text-gray-100;
}

/* Prose styles for markdown content */
.prose {
  @apply max-w-none;
}

.prose h1 {
  @apply text-3xl font-bold text-gray-100 mb-4 mt-8;
}

.prose h2 {
  @apply text-2xl font-bold text-gray-100 mb-3 mt-6;
}

.prose h3 {
  @apply text-xl font-semibold text-gray-100 mb-2 mt-4;
}

.prose p {
  @apply text-gray-300 mb-4 leading-relaxed;
}

.prose a {
  @apply text-blue-400 hover:text-blue-300 underline;
}

/* Inline code - solid background, no glass */
.prose :not(pre) > code {
  @apply bg-gray-800/90 text-gray-100 px-1.5 py-0.5 rounded text-sm;
  backdrop-filter: none;
}

/* Code blocks - solid background, NO glass effect for syntax highlighting readability */
.prose pre {
  background: rgba(30, 30, 40, 0.95);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  border-radius: 12px;
  padding: 16px;
  overflow-x: auto;
  border: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 1.5rem;
}

.prose pre code {
  @apply bg-transparent p-0;
  font-size: 0.9em;
  line-height: 1.7;
}

.prose ul {
  @apply list-disc list-inside mb-4 text-gray-300;
}

.prose ol {
  @apply list-decimal list-inside mb-4 text-gray-300;
}

.prose blockquote {
  @apply border-l-4 border-blue-500 pl-4 italic text-gray-400 mb-4;
}

/* Glass tables with clear cell borders */
.prose table {
  background: rgba(255, 255, 255, var(--glass-bg-content-opacity));
  /* Safari: hardcoded value (CSS variables don't work in webkit prefix) */
  -webkit-backdrop-filter: blur(8px);
  /* Modern browsers: uses CSS variable */
  backdrop-filter: blur(var(--glass-blur-content));
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  border-collapse: separate;
  border-spacing: 0;
  overflow: hidden;
  width: 100%;
  margin-bottom: 1.5rem;
}

.prose thead {
  background: rgba(255, 255, 255, 0.1); /* Elevated opacity for headers */
}

.prose th {
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  padding: 12px 16px;
  text-align: left;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.95);
}

.prose td {
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-right: 1px solid rgba(255, 255, 255, 0.08);
  padding: 12px 16px;
  color: rgba(255, 255, 255, 0.9);
}

.prose td:last-child {
  border-right: none;
}

.prose tr:last-child td {
  border-bottom: none;
}

/* Hover state for data rows */
.prose tbody tr:hover {
  background: rgba(255, 255, 255, 0.05);
}

/* Glass button utilities */
.glass-button {
  background: rgba(255, 255, 255, 0.08);
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(var(--glass-blur-sm));
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  transition: background 0.2s ease, transform 0.15s ease;
}

.glass-button:hover {
  background: rgba(255, 255, 255, 0.12);
  transform: translateY(-1px);
}

.glass-button-blue {
  background: rgba(100, 150, 255, 0.15);
  border-color: rgba(100, 150, 255, 0.25);
}

.glass-button-blue:hover {
  background: rgba(100, 150, 255, 0.22);
}

.glass-button-red {
  background: rgba(255, 100, 100, 0.12);
  border-color: rgba(255, 100, 100, 0.2);
}

.glass-button-red:hover {
  background: rgba(255, 100, 100, 0.18);
}