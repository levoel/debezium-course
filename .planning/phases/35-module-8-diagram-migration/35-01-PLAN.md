---
phase: 35-module-8-diagram-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/diagrams/module8/CapstoneArchitectureDiagrams.tsx
  - src/components/diagrams/module8/C4ArchitectureDiagrams.tsx
  - src/components/diagrams/module8/ProductionReadinessDiagrams.tsx
autonomous: true

must_haves:
  truths:
    - "User can see complete capstone pipeline architecture (5 layers)"
    - "User can see C4 System Context diagram with actors and system boundaries"
    - "User can see C4 Container Diagram with nested boundaries"
    - "User can see production maturity comparison (local vs production)"
    - "User can see Four Golden Signals mapped to CDC metrics"
    - "All diagram nodes have Russian tooltips with capstone-specific explanations"
  artifacts:
    - path: "src/components/diagrams/module8/CapstoneArchitectureDiagrams.tsx"
      provides: "Hero diagram for lesson 01"
      exports: ["CapstoneArchitectureDiagram"]
      min_lines: 150
    - path: "src/components/diagrams/module8/C4ArchitectureDiagrams.tsx"
      provides: "2 C4 Model diagrams for lesson 02"
      exports: ["SystemContextDiagram", "ContainerDiagram"]
      min_lines: 200
    - path: "src/components/diagrams/module8/ProductionReadinessDiagrams.tsx"
      provides: "2 maturity diagrams for lesson 03"
      exports: ["ProductionGapDiagram", "FourGoldenSignalsDiagram"]
      min_lines: 120
  key_links:
    - from: "CapstoneArchitectureDiagram"
      to: "All primitives (FlowNode, Arrow, DiagramContainer, Tooltip)"
      via: "import statements"
      pattern: "import.*from.*primitives"
    - from: "C4ArchitectureDiagrams"
      to: "Nested DiagramContainers"
      via: "DiagramContainer wrapping FlowNodes"
      pattern: "DiagramContainer.*color.*title"
    - from: "ProductionReadinessDiagrams"
      to: "Amber vs emerald color contrast"
      via: "color prop on DiagramContainer"
      pattern: 'color="amber"|color="emerald"'
---

<objective>
Create core capstone architecture diagrams including the hero full-pipeline diagram, C4 Model architecture views, and production readiness comparisons.

Purpose: Establish the foundational capstone diagrams that demonstrate complete system architecture, C4 Model documentation patterns, and production maturity progression. These 5 diagrams form the architectural foundation of Module 8.

Output:
- CapstoneArchitectureDiagrams.tsx with 1 hero diagram
- C4ArchitectureDiagrams.tsx with 2 C4 Model diagrams
- ProductionReadinessDiagrams.tsx with 2 maturity diagrams
</objective>

<execution_context>
@/Users/levoely/.claude/get-shit-done/workflows/execute-plan.md
@/Users/levoely/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/35-module-8-diagram-migration/35-RESEARCH.md

# Reference primitives
@src/components/diagrams/primitives/FlowNode.tsx
@src/components/diagrams/primitives/Arrow.tsx
@src/components/diagrams/primitives/DiagramContainer.tsx
@src/components/diagrams/primitives/Tooltip.tsx

# Source MDX files
@src/content/course/08-module-8/01-capstone-overview.mdx
@src/content/course/08-module-8/02-architecture-deliverables.mdx
@src/content/course/08-module-8/03-self-assessment.mdx

# Reference Module 7 patterns
@src/components/diagrams/module7/MonitoringDiagrams.tsx
@src/components/diagrams/module7/DataflowBigQueryDiagrams.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CapstoneArchitectureDiagrams.tsx (hero diagram)</name>
  <files>src/components/diagrams/module8/CapstoneArchitectureDiagrams.tsx</files>
  <action>
Create CapstoneArchitectureDiagrams.tsx with the capstone hero diagram showing complete 5-layer architecture.

**Pattern:** Vertical stacking of DiagramContainers, each representing one architectural layer.

**CapstoneArchitectureDiagram** (5 layers: Source → CDC → Processing → Warehouse → Monitoring)

Shows: Aurora (Application → orders table → outbox table) → Debezium (Connector + Kafka) → PyFlink (transformations) → BigQuery (Storage Write API + Table) → Prometheus + Grafana

```typescript
import React from 'react';
import { FlowNode } from '../primitives/FlowNode';
import { Arrow } from '../primitives/Arrow';
import { DiagramContainer } from '../primitives/DiagramContainer';
import { Tooltip } from '../primitives/Tooltip';

export function CapstoneArchitectureDiagram() {
  return (
    <div className="flex flex-col gap-4">
      {/* Layer 1: Source - Aurora PostgreSQL */}
      <DiagramContainer color="purple" title="Source: Aurora PostgreSQL">
        <div className="flex flex-col md:flex-row items-center justify-center gap-3 flex-wrap">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Application</p>
              <p className="text-sm">Пишет заказы в orders table и события в outbox table</p>
              <p className="text-sm mt-1">В одной транзакции - атомарность гарантирована</p>
            </div>
          }>
            <FlowNode variant="app">Application</FlowNode>
          </Tooltip>

          <div className="flex flex-col items-center gap-1">
            <Arrow direction="down" label="INSERT order" className="md:hidden" />
            <Arrow direction="right" label="INSERT order" className="hidden md:block" />
          </div>

          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">orders table</p>
              <p className="text-sm">Бизнес-данные: заказы клиентов</p>
              <p className="text-sm mt-1">REPLICA IDENTITY DEFAULT (pk достаточно)</p>
            </div>
          }>
            <FlowNode variant="database">orders table</FlowNode>
          </Tooltip>

          <div className="flex items-center gap-2 text-xs text-purple-200/70">
            <span className="hidden md:inline">+</span>
            <span className="md:hidden">↓</span>
            <span>same transaction</span>
          </div>

          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">outbox table</p>
              <p className="text-sm">Transactional event publishing pattern</p>
              <p className="text-sm mt-1">REPLICA IDENTITY FULL для CDC</p>
              <p className="text-sm mt-1">Поля: id, aggregatetype, payload (JSONB)</p>
            </div>
          }>
            <FlowNode variant="connector" className="bg-red-500/20 border-red-400/30">
              outbox table
            </FlowNode>
          </Tooltip>
        </div>
      </DiagramContainer>

      <Arrow direction="down" label="WAL stream" className="self-center" />

      {/* Layer 2: CDC - Debezium */}
      <DiagramContainer color="emerald" title="CDC Layer: Debezium">
        <div className="flex flex-col md:flex-row items-center justify-center gap-3 flex-wrap">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Debezium Connector</p>
              <p className="text-sm">Захватывает события из outbox через WAL</p>
              <p className="text-sm mt-1">Outbox Event Router SMT роутирует по aggregatetype</p>
              <p className="text-sm mt-1">table.include.list: public.outbox</p>
            </div>
          }>
            <FlowNode variant="connector">
              Debezium Connector
              <div className="text-xs text-gray-400 mt-1">(Outbox Event Router SMT)</div>
            </FlowNode>
          </Tooltip>

          <div className="flex flex-col items-center gap-1">
            <Arrow direction="down" label="Route events" className="md:hidden" />
            <Arrow direction="right" label="Route events" className="hidden md:block" />
          </div>

          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Kafka Topic</p>
              <p className="text-sm">outbox.event.orders - роутированные события</p>
              <p className="text-sm mt-1">Durable log с at-least-once delivery</p>
              <p className="text-sm mt-1">Retention: 7 days (default)</p>
            </div>
          }>
            <FlowNode variant="cluster">
              Kafka Topic
              <div className="text-xs text-gray-400 mt-1">outbox.event.orders</div>
            </FlowNode>
          </Tooltip>
        </div>
      </DiagramContainer>

      <Arrow direction="down" label="Consume CDC" className="self-center" />

      {/* Layer 3: Processing - PyFlink */}
      <DiagramContainer color="purple" title="Stream Processing: PyFlink">
        <div className="flex flex-col md:flex-row items-center justify-center gap-3 flex-wrap">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">PyFlink Table API</p>
              <p className="text-sm">format='debezium-json' для автоматического парсинга</p>
              <p className="text-sm mt-1">Трансформации: enrichment, filtering, aggregation</p>
              <p className="text-sm mt-1">Checkpoint interval: 60s для fault tolerance</p>
            </div>
          }>
            <FlowNode variant="connector">
              PyFlink Table API
              <div className="text-xs text-gray-400 mt-1">(transformations)</div>
            </FlowNode>
          </Tooltip>

          <div className="flex flex-col items-center gap-1">
            <Arrow direction="down" label="Publish enriched" className="md:hidden" />
            <Arrow direction="right" label="Publish enriched" className="hidden md:block" />
          </div>

          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Kafka Sink Topic</p>
              <p className="text-sm">bigquery.orders - обогащенные события</p>
              <p className="text-sm mt-1">Готовы для ingestion в warehouse</p>
            </div>
          }>
            <FlowNode variant="cluster">
              Kafka Topic
              <div className="text-xs text-gray-400 mt-1">bigquery.orders</div>
            </FlowNode>
          </Tooltip>
        </div>
      </DiagramContainer>

      <Arrow direction="down" label="Stream ingestion" className="self-center" />

      {/* Layer 4: Warehouse - BigQuery */}
      <DiagramContainer color="amber" title="Analytics: BigQuery">
        <div className="flex flex-col md:flex-row items-center justify-center gap-3 flex-wrap">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">BigQuery Connector</p>
              <p className="text-sm">Storage Write API для CDC ingestion</p>
              <p className="text-sm mt-1">upsertEnabled=true для UPSERT/DELETE</p>
              <p className="text-sm mt-1">intermediateTableSuffix=_bqc для staging</p>
            </div>
          }>
            <FlowNode variant="sink">
              BigQuery Connector
              <div className="text-xs text-gray-400 mt-1">(Storage Write API)</div>
            </FlowNode>
          </Tooltip>

          <div className="flex flex-col items-center gap-1">
            <Arrow direction="down" label="UPSERT/DELETE" className="md:hidden" />
            <Arrow direction="right" label="UPSERT/DELETE" className="hidden md:block" />
          </div>

          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">BigQuery Table</p>
              <p className="text-sm">project.dataset.orders с PRIMARY KEY (NOT ENFORCED)</p>
              <p className="text-sm mt-1">CDC-enabled для UPSERT operations</p>
              <p className="text-sm mt-1">Partitioned by DATE(created_at) для performance</p>
            </div>
          }>
            <FlowNode variant="target">
              BigQuery Table
              <div className="text-xs text-gray-400 mt-1">project.dataset.orders</div>
            </FlowNode>
          </Tooltip>
        </div>
      </DiagramContainer>

      <Arrow direction="down" label="Export metrics" className="self-center" />

      {/* Layer 5: Monitoring - Observability */}
      <DiagramContainer color="blue" title="Observability">
        <div className="flex flex-col md:flex-row items-center justify-center gap-3 flex-wrap">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Prometheus</p>
              <p className="text-sm">Скрапит JMX metrics от Debezium</p>
              <p className="text-sm mt-1">Scrape interval: 15s</p>
              <p className="text-sm mt-1">Key metrics: MilliSecondsBehindSource, QueueRemainingCapacity</p>
            </div>
          }>
            <FlowNode variant="sink">
              Prometheus
              <div className="text-xs text-gray-400 mt-1">(JMX metrics)</div>
            </FlowNode>
          </Tooltip>

          <div className="flex flex-col items-center gap-1">
            <Arrow direction="down" className="md:hidden" />
            <Arrow direction="right" className="hidden md:block" />
          </div>

          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Grafana</p>
              <p className="text-sm">Dashboard с Four Golden Signals</p>
              <p className="text-sm mt-1">Alerts для connector failures и lag > 5 min</p>
            </div>
          }>
            <FlowNode variant="connector">
              Grafana
              <div className="text-xs text-gray-400 mt-1">(dashboards)</div>
            </FlowNode>
          </Tooltip>
        </div>
      </DiagramContainer>

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-gray-400">
        <p className="font-semibold mb-2">End-to-End Latency (typical):</p>
        <ul className="space-y-1">
          <li>• Application → outbox insert: &lt;1ms (same transaction)</li>
          <li>• Debezium WAL polling: 100-500ms (configurable)</li>
          <li>• Kafka publish: 10-50ms (network latency)</li>
          <li>• PyFlink processing: 50-200ms (depends on transformation complexity)</li>
          <li>• BigQuery ingestion: 100-500ms (Storage Write API)</li>
          <li>• <span className="font-semibold text-emerald-400">Total: ~500-2000ms end-to-end</span></li>
        </ul>
      </div>
    </div>
  );
}
```

**Key design notes:**
- Vertical stacking for mobile-first responsiveness
- Each layer is a DiagramContainer with semantic color (purple source, emerald CDC, purple processing, amber warehouse, blue monitoring)
- Responsive arrows (down on mobile, right on desktop)
- Technology labels below component names
- Latency breakdown footer for performance context
- Red color override for outbox table (Outbox Pattern signature)
  </action>
  <verify>
- File exists at src/components/diagrams/module8/CapstoneArchitectureDiagrams.tsx
- Exports CapstoneArchitectureDiagram component
- Shows 5 vertical layers with responsive layout
- All tooltips in Russian with technical details
- Latency breakdown in footer
- No TypeScript errors
  </verify>
  <done>
Hero capstone diagram created showing complete 5-layer architecture with responsive layout and detailed tooltips
  </done>
</task>

<task type="auto">
  <name>Task 2: Create C4ArchitectureDiagrams.tsx (2 C4 Model diagrams)</name>
  <files>src/components/diagrams/module8/C4ArchitectureDiagrams.tsx</files>
  <action>
Create C4ArchitectureDiagrams.tsx with 2 C4 Model diagrams (System Context + Container Diagram).

**Pattern:** Map C4 semantic elements to FlowNode variants with nested DiagramContainers for boundaries.

**1. SystemContextDiagram** (C4 Level 1: external actors and system boundaries)

Shows: Data Analyst (Person) → CDC Pipeline (System) ← E-commerce App (System_Ext) / BigQuery (System_Ext)

```typescript
import React from 'react';
import { FlowNode } from '../primitives/FlowNode';
import { Arrow } from '../primitives/Arrow';
import { DiagramContainer } from '../primitives/DiagramContainer';
import { Tooltip } from '../primitives/Tooltip';

export function SystemContextDiagram() {
  return (
    <DiagramContainer
      title="System Context: E-commerce CDC Pipeline"
      color="neutral"
      description="C4 Model Level 1: Внешние актеры и границы системы"
    >
      <div className="flex flex-col items-center gap-6">
        {/* External actor - Person */}
        <Tooltip content={
          <div>
            <p className="font-semibold mb-1">Data Analyst</p>
            <p className="text-sm">Внешний актер, использующий систему</p>
            <p className="text-sm mt-1">Запускает SQL queries для real-time analytics</p>
          </div>
        }>
          <FlowNode variant="app" className="rounded-full px-6">
            Data Analyst
          </FlowNode>
        </Tooltip>

        <Arrow direction="down" label="Queries real-time data" />

        {/* Main System - CDC Pipeline */}
        <div className="border-2 border-blue-400/30 rounded-lg p-6 bg-blue-500/10 w-full max-w-md">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">CDC Pipeline</p>
              <p className="text-sm">Центральная система: захватывает и стримит изменения</p>
              <p className="text-sm mt-1">Aurora → Debezium → PyFlink → BigQuery</p>
            </div>
          }>
            <FlowNode variant="connector" className="text-lg font-bold w-full">
              CDC Pipeline
              <div className="text-xs font-normal text-gray-400 mt-1">
                Captures and streams changes from Aurora to BigQuery
              </div>
            </FlowNode>
          </Tooltip>
        </div>

        {/* External systems */}
        <div className="flex flex-col md:flex-row gap-8 w-full justify-center">
          <div className="flex flex-col items-center gap-2">
            <Arrow direction="down" label="Writes to outbox" />
            <Tooltip content={
              <div>
                <p className="font-semibold mb-1">E-commerce Application</p>
                <p className="text-sm">Внешняя система вне нашего контроля</p>
                <p className="text-sm mt-1">Записывает заказы в Aurora с Outbox Pattern</p>
              </div>
            }>
              <FlowNode variant="sink" className="border-dashed">
                E-commerce Application
              </FlowNode>
            </Tooltip>
          </div>

          <div className="flex flex-col items-center gap-2">
            <Arrow direction="down" label="Streams CDC events" />
            <Tooltip content={
              <div>
                <p className="font-semibold mb-1">BigQuery</p>
                <p className="text-sm">Внешняя система: Google Cloud data warehouse</p>
                <p className="text-sm mt-1">Хранит CDC события для analytics</p>
              </div>
            }>
              <FlowNode variant="sink" className="border-dashed">
                BigQuery
              </FlowNode>
            </Tooltip>
          </div>
        </div>
      </div>

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-gray-400">
        <p className="font-semibold mb-1">C4 System Context показывает:</p>
        <ul className="space-y-1">
          <li>• <span className="text-blue-300">Person</span> (rounded node) - внешний актер</li>
          <li>• <span className="text-blue-300">System</span> (solid border) - наша система</li>
          <li>• <span className="text-blue-300">System_Ext</span> (dashed border) - внешние системы</li>
        </ul>
      </div>
    </DiagramContainer>
  );
}
```

**2. ContainerDiagram** (C4 Level 2: internal components with technology details)

Shows: Nested DiagramContainers for Source / CDC Layer / Processing / Warehouse / Monitoring boundaries

```typescript
export function ContainerDiagram() {
  return (
    <DiagramContainer
      title="Container Diagram: CDC Pipeline Components"
      color="neutral"
      description="C4 Model Level 2: Компоненты и технологии внутри CDC Pipeline"
    >
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
        {/* Source boundary */}
        <DiagramContainer color="purple" title="Source" className="h-fit">
          <div className="flex flex-col gap-2">
            <Tooltip content={
              <div>
                <p className="font-semibold mb-1">Aurora PostgreSQL</p>
                <p className="text-sm">Transactional database с logical replication</p>
                <p className="text-sm mt-1">wal_level=logical, max_replication_slots=10</p>
              </div>
            }>
              <FlowNode variant="database">
                Aurora PostgreSQL
                <div className="text-xs text-gray-400 mt-1">Database</div>
              </FlowNode>
            </Tooltip>
            <Tooltip content={
              <div>
                <p className="font-semibold mb-1">Outbox Table</p>
                <p className="text-sm">Transactional event publishing</p>
                <p className="text-sm mt-1">REPLICA IDENTITY FULL для CDC</p>
              </div>
            }>
              <FlowNode variant="connector">
                Outbox Table
                <div className="text-xs text-gray-400 mt-1">PostgreSQL Table</div>
              </FlowNode>
            </Tooltip>
          </div>
        </DiagramContainer>

        {/* CDC Layer boundary */}
        <DiagramContainer color="emerald" title="CDC Layer" className="h-fit">
          <div className="flex flex-col gap-2">
            <Tooltip content={
              <div>
                <p className="font-semibold mb-1">Debezium Connector</p>
                <p className="text-sm">Captures WAL changes с Outbox Event Router SMT</p>
                <p className="text-sm mt-1">plugin.name=pgoutput, snapshot.mode=initial</p>
              </div>
            }>
              <FlowNode variant="connector">
                Debezium Connector
                <div className="text-xs text-gray-400 mt-1">Kafka Connect</div>
              </FlowNode>
            </Tooltip>
            <Tooltip content={
              <div>
                <p className="font-semibold mb-1">Kafka</p>
                <p className="text-sm">Durable event log</p>
                <p className="text-sm mt-1">Replication factor: 3, min.insync.replicas: 2</p>
              </div>
            }>
              <FlowNode variant="cluster">
                Kafka
                <div className="text-xs text-gray-400 mt-1">Event Streaming</div>
              </FlowNode>
            </Tooltip>
          </div>
        </DiagramContainer>

        {/* Stream Processing boundary */}
        <DiagramContainer color="purple" title="Stream Processing" className="h-fit">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">PyFlink Job</p>
              <p className="text-sm">Transforms and enriches CDC events</p>
              <p className="text-sm mt-1">format='debezium-json', checkpoint interval=60s</p>
            </div>
          }>
            <FlowNode variant="connector">
              PyFlink Job
              <div className="text-xs text-gray-400 mt-1">Python/Flink</div>
            </FlowNode>
          </Tooltip>
        </DiagramContainer>

        {/* Warehouse boundary */}
        <DiagramContainer color="amber" title="Analytics Warehouse" className="h-fit">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">BigQuery</p>
              <p className="text-sm">CDC-enabled tables с primary keys</p>
              <p className="text-sm mt-1">PRIMARY KEY (NOT ENFORCED), partitioned by date</p>
            </div>
          }>
            <FlowNode variant="sink">
              BigQuery
              <div className="text-xs text-gray-400 mt-1">Data Warehouse</div>
            </FlowNode>
          </Tooltip>
        </DiagramContainer>

        {/* Monitoring boundary */}
        <DiagramContainer color="blue" title="Observability" className="h-fit">
          <div className="flex flex-col gap-2">
            <Tooltip content={
              <div>
                <p className="font-semibold mb-1">Prometheus</p>
                <p className="text-sm">Scrapes JMX metrics</p>
                <p className="text-sm mt-1">Scrape interval: 15s, retention: 15 days</p>
              </div>
            }>
              <FlowNode variant="sink">
                Prometheus
                <div className="text-xs text-gray-400 mt-1">Metrics DB</div>
              </FlowNode>
            </Tooltip>
            <Tooltip content={
              <div>
                <p className="font-semibold mb-1">Grafana</p>
                <p className="text-sm">Visualizes metrics</p>
                <p className="text-sm mt-1">Dashboards: Four Golden Signals for CDC</p>
              </div>
            }>
              <FlowNode variant="connector">
                Grafana
                <div className="text-xs text-gray-400 mt-1">Dashboards</div>
              </FlowNode>
            </Tooltip>
          </div>
        </DiagramContainer>
      </div>

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-gray-400">
        <p className="font-semibold mb-1">C4 Container Diagram показывает:</p>
        <ul className="space-y-1">
          <li>• <span className="text-blue-300">Container_Boundary</span> - границы подсистем</li>
          <li>• <span className="text-blue-300">ContainerDb</span> - database компоненты</li>
          <li>• <span className="text-blue-300">Container</span> - application компоненты</li>
          <li>• <span className="text-blue-300">ContainerQueue</span> - messaging компоненты</li>
          <li>• Технология указана под каждым компонентом</li>
        </ul>
      </div>
    </DiagramContainer>
  );
}
```

**Key design notes:**
- System Context: rounded FlowNode for Person, solid border box for System, dashed border for System_Ext
- Container Diagram: nested DiagramContainers with responsive grid (1 col mobile, 2 cols tablet, 5 cols desktop)
- Technology labels below each component name
- C4 Model legend in footer explaining semantic elements
  </action>
  <verify>
- File exists at src/components/diagrams/module8/C4ArchitectureDiagrams.tsx
- Exports SystemContextDiagram and ContainerDiagram components
- SystemContextDiagram shows Person (rounded), System (solid border), System_Ext (dashed)
- ContainerDiagram uses nested DiagramContainers with responsive grid
- All tooltips in Russian with technical configuration details
- No TypeScript errors
  </verify>
  <done>
2 C4 Model diagrams created showing System Context and Container Diagram with C4 semantic patterns
  </done>
</task>

<task type="auto">
  <name>Task 3: Create ProductionReadinessDiagrams.tsx (2 maturity diagrams)</name>
  <files>src/components/diagrams/module8/ProductionReadinessDiagrams.tsx</files>
  <action>
Create ProductionReadinessDiagrams.tsx with 2 diagrams showing production maturity progression.

**1. ProductionGapDiagram** (local vs production comparison)

Shows: Local Development (works on laptop) vs Production (5 production concerns)

```typescript
import React from 'react';
import { FlowNode } from '../primitives/FlowNode';
import { DiagramContainer } from '../primitives/DiagramContainer';
import { Tooltip } from '../primitives/Tooltip';

export function ProductionGapDiagram() {
  return (
    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
      {/* Local Development */}
      <DiagramContainer color="amber" title="Local Development">
        <Tooltip content={
          <div>
            <p className="font-semibold mb-1">Local Development</p>
            <p className="text-sm">"Работает на laptop" ≠ production-ready</p>
            <p className="text-sm mt-1">Docker Compose, single instance, no monitoring</p>
          </div>
        }>
          <FlowNode variant="app" className="w-full">
            Code works in<br/>Docker Compose
          </FlowNode>
        </Tooltip>
        <div className="mt-3 text-xs text-amber-200/70">
          <p>Functional, but not production-ready</p>
        </div>
      </DiagramContainer>

      {/* Production Requirements */}
      <DiagramContainer color="emerald" title="Production">
        <div className="flex flex-col gap-2">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Monitoring</p>
              <p className="text-sm">Prometheus + Grafana для visibility</p>
              <p className="text-sm mt-1">Four Golden Signals: Latency, Traffic, Errors, Saturation</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm">
              Monitoring
            </FlowNode>
          </Tooltip>
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Fault Tolerance</p>
              <p className="text-sm">At-least-once delivery + idempotency</p>
              <p className="text-sm mt-1">PyFlink checkpointing для state recovery</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm">
              Fault Tolerance
            </FlowNode>
          </Tooltip>
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Scalability</p>
              <p className="text-sm">Horizontal scaling для high throughput</p>
              <p className="text-sm mt-1">Kafka partitions, Flink parallelism</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm">
              Scalability
            </FlowNode>
          </Tooltip>
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Operational Procedures</p>
              <p className="text-sm">Runbook для типичных failure scenarios</p>
              <p className="text-sm mt-1">Connector restart, slot cleanup, schema evolution</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm">
              Operational Procedures
            </FlowNode>
          </Tooltip>
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Documentation</p>
              <p className="text-sm">Architecture diagrams, configuration examples</p>
              <p className="text-sm mt-1">C4 Model, deployment guides, troubleshooting</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm">
              Documentation
            </FlowNode>
          </Tooltip>
        </div>
        <div className="mt-3 text-xs text-emerald-200/70">
          <p>Production-ready: reliable, observable, maintainable</p>
        </div>
      </DiagramContainer>
    </div>
  );
}
```

**2. FourGoldenSignalsDiagram** (Google SRE signals mapped to CDC)

Shows: Generic signals (Latency, Traffic, Errors, Saturation) → CDC-specific metrics

```typescript
export function FourGoldenSignalsDiagram() {
  return (
    <DiagramContainer
      title="Four Golden Signals для CDC"
      color="purple"
      description="Google SRE framework применённый к CDC monitoring"
    >
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {/* Latency */}
        <div className="flex flex-col gap-2">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Latency</p>
              <p className="text-sm">Время обработки событий</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm" className="bg-purple-500/20 border-purple-400/30">
              Latency
            </FlowNode>
          </Tooltip>
          <div className="text-xs text-purple-200/70">↓ maps to</div>
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Replication Lag</p>
              <p className="text-sm">MilliSecondsBehindSource — PRIMARY CDC metric</p>
              <p className="text-sm mt-1">Target: &lt; 5 seconds для real-time analytics</p>
            </div>
          }>
            <FlowNode variant="database" size="sm">
              Replication Lag
            </FlowNode>
          </Tooltip>
        </div>

        {/* Traffic */}
        <div className="flex flex-col gap-2">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Traffic</p>
              <p className="text-sm">Объём запросов/событий</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm" className="bg-purple-500/20 border-purple-400/30">
              Traffic
            </FlowNode>
          </Tooltip>
          <div className="text-xs text-purple-200/70">↓ maps to</div>
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Event Throughput</p>
              <p className="text-sm">Events/second через CDC pipeline</p>
              <p className="text-sm mt-1">Measure at: Debezium, Kafka, PyFlink</p>
            </div>
          }>
            <FlowNode variant="cluster" size="sm">
              Event Throughput
            </FlowNode>
          </Tooltip>
        </div>

        {/* Errors */}
        <div className="flex flex-col gap-2">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Errors</p>
              <p className="text-sm">Частота ошибок</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm" className="bg-purple-500/20 border-purple-400/30">
              Errors
            </FlowNode>
          </Tooltip>
          <div className="text-xs text-purple-200/70">↓ maps to</div>
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Connector Failures</p>
              <p className="text-sm">Connector State = FAILED, task crashes</p>
              <p className="text-sm mt-1">Alert on any FAILED state transition</p>
            </div>
          }>
            <FlowNode variant="app" size="sm">
              Connector Failures
            </FlowNode>
          </Tooltip>
        </div>

        {/* Saturation */}
        <div className="flex flex-col gap-2">
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Saturation</p>
              <p className="text-sm">Использование ресурсов</p>
            </div>
          }>
            <FlowNode variant="connector" size="sm" className="bg-purple-500/20 border-purple-400/30">
              Saturation
            </FlowNode>
          </Tooltip>
          <div className="text-xs text-purple-200/70">↓ maps to</div>
          <Tooltip content={
            <div>
              <p className="font-semibold mb-1">Queue Capacity</p>
              <p className="text-sm">QueueRemainingCapacity &lt; 20% → backpressure</p>
              <p className="text-sm mt-1">WAL disk utilization для PostgreSQL</p>
            </div>
          }>
            <FlowNode variant="sink" size="sm">
              Queue Capacity
            </FlowNode>
          </Tooltip>
        </div>
      </div>

      <div className="mt-4 pt-3 border-t border-white/10 text-xs text-purple-200/70">
        <p className="font-semibold mb-1">Four Golden Signals framework:</p>
        <ul className="space-y-1">
          <li>• <span className="text-purple-300">Latency</span> → Replication lag (ms behind source)</li>
          <li>• <span className="text-purple-300">Traffic</span> → Events/second throughput</li>
          <li>• <span className="text-purple-300">Errors</span> → Connector failures, task crashes</li>
          <li>• <span className="text-purple-300">Saturation</span> → Queue capacity, WAL bloat</li>
        </ul>
      </div>
    </DiagramContainer>
  );
}
```

**Key design notes:**
- Side-by-side comparison (amber local vs emerald production)
- Four Golden Signals as 4-column grid showing mapping from generic to CDC-specific
- Color progression for signal hierarchy (purple generic → specific variants)
  </action>
  <verify>
- File exists at src/components/diagrams/module8/ProductionReadinessDiagrams.tsx
- Exports ProductionGapDiagram and FourGoldenSignalsDiagram components
- ProductionGapDiagram uses amber vs emerald color contrast
- FourGoldenSignalsDiagram shows 4-column grid with mapping arrows
- All tooltips in Russian with production guidance
- No TypeScript errors
  </verify>
  <done>
2 production readiness diagrams created showing local vs production gap and Four Golden Signals mapping
  </done>
</task>

</tasks>

<verification>
- CapstoneArchitectureDiagrams.tsx exists with 1 hero diagram (5 layers)
- C4ArchitectureDiagrams.tsx exists with 2 C4 Model diagrams
- ProductionReadinessDiagrams.tsx exists with 2 maturity diagrams
- All 5 diagrams use existing primitives (FlowNode, Arrow, DiagramContainer, Tooltip)
- Responsive layouts (vertical stacking, responsive grid)
- All tooltips in Russian with capstone-specific content
- TypeScript compiles without errors
- Color scheme: purple (source, processing), emerald (CDC), amber (warehouse, warning), blue (monitoring), neutral (C4)
</verification>

<success_criteria>
- 5 diagrams created (1 hero + 2 C4 + 2 maturity)
- C4 Model patterns established (System Context, Container Diagram)
- Production readiness patterns established (local vs production, Four Golden Signals)
- All diagrams render with tooltips
- Responsive layouts for mobile/desktop
- Requirements MOD8-01, MOD8-02 (partial), MOD8-03 (partial) complete
- Foundation for Wave 2 (multi-database + MDX migration)
</success_criteria>

<output>
After completion, create `.planning/phases/35-module-8-diagram-migration/35-01-SUMMARY.md`
</output>
