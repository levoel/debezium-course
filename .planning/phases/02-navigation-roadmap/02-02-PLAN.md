---
phase: 02-navigation-roadmap
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/MobileMenuToggle.tsx
  - src/components/Navigation.tsx
autonomous: true

must_haves:
  truths:
    - "Hamburger button toggles sidebar visibility on mobile"
    - "Sidebar shows all course lessons organized by module"
    - "Current page is visually highlighted in navigation"
    - "Clicking navigation link closes sidebar on mobile"
  artifacts:
    - path: "src/components/MobileMenuToggle.tsx"
      provides: "Hamburger menu button with open/close toggle"
      exports: ["MobileMenuToggle"]
      min_lines: 20
    - path: "src/components/Navigation.tsx"
      provides: "Sidebar navigation with module grouping"
      exports: ["Navigation"]
      min_lines: 40
  key_links:
    - from: "src/components/MobileMenuToggle.tsx"
      to: "src/stores/navigation.ts"
      via: "useStore hook"
      pattern: "useStore.*isSidebarOpen"
    - from: "src/components/Navigation.tsx"
      to: "src/stores/navigation.ts"
      via: "isSidebarOpen.set"
      pattern: "isSidebarOpen\\.set.*false"
---

<objective>
Create the sidebar navigation components - a hamburger menu toggle for mobile and a full navigation sidebar showing course structure organized by modules.

Purpose: These components enable responsive navigation - MobileMenuToggle controls sidebar visibility on mobile, Navigation displays the course structure with current page highlighting and closes after link clicks.
Output: `src/components/MobileMenuToggle.tsx` and `src/components/Navigation.tsx` React components ready for integration into BaseLayout.
</objective>

<execution_context>
@/Users/levoely/.claude/get-shit-done/workflows/execute-plan.md
@/Users/levoely/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-navigation-roadmap/02-RESEARCH.md

# Prior plan output (if needed for patterns)
@src/stores/navigation.ts
@src/utils/navigation.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MobileMenuToggle hamburger button component</name>
  <files>src/components/MobileMenuToggle.tsx</files>
  <action>
Create `src/components/MobileMenuToggle.tsx`:

1. Import `useStore` from `@nanostores/react` and `isSidebarOpen` from stores
2. Create functional component that:
   - Uses `useStore(isSidebarOpen)` to get current state
   - Renders a button that toggles `isSidebarOpen.set(!$isOpen)` on click
   - Shows hamburger icon (3 horizontal lines) when closed
   - Shows X icon when open
   - Has `lg:hidden` class to hide on desktop (sidebar always visible there)
   - Includes proper ARIA attributes (`aria-label`, `aria-expanded`)

SVG icons (inline, no external dependencies):
- Hamburger: `<path d="M4 6h16M4 12h16M4 18h16" />`
- Close X: `<path d="M6 18L18 6M6 6l12 12" />`

Styling with Tailwind:
- `p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-md`
- `lg:hidden` to hide on desktop
- SVG: `w-6 h-6`, `stroke="currentColor"`, `strokeWidth={2}`, `strokeLinecap="round"`

AVOID: Using external icon libraries. Inline SVG keeps bundle small and avoids hydration issues.
  </action>
  <verify>
    - `cat src/components/MobileMenuToggle.tsx` shows component with useStore
    - Component exports `MobileMenuToggle` function
    - Has `lg:hidden` class for responsive behavior
    - Has ARIA accessibility attributes
  </verify>
  <done>
    - MobileMenuToggle.tsx created with hamburger/X toggle
    - Uses nanostores for state (not React useState)
    - Hidden on desktop (lg:hidden), visible on mobile
    - Accessible with aria-label and aria-expanded
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Navigation sidebar component with module grouping</name>
  <files>src/components/Navigation.tsx</files>
  <action>
Create `src/components/Navigation.tsx`:

1. Define props interface:
```typescript
interface NavigationProps {
  modules: Map<string, Array<{
    title: string;
    slug: string;
    difficulty: string;
    estimatedTime: number;
  }>>;
  currentPath: string;
}
```

2. Create functional component that:
   - Receives modules Map and currentPath as serializable props
   - Iterates over modules Map to render grouped navigation
   - For each module: renders module header (e.g., "Module 01")
   - For each lesson: renders link with:
     - href to `/course/${lesson.slug}`
     - onClick handler that calls `isSidebarOpen.set(false)` (close on navigation)
     - `aria-current="page"` when `currentPath.includes(lesson.slug)`
     - Visual highlight for current page (bg-blue-600)
     - Time estimate badge (small text)

Styling:
- Module headers: `text-sm font-semibold text-gray-400 uppercase tracking-wide mb-2`
- Links: `block px-3 py-2 rounded-md text-sm transition-colors duration-150`
- Current link: `bg-blue-600 text-white font-medium`
- Other links: `text-gray-300 hover:bg-gray-700 hover:text-white`
- Time badge: `text-xs text-gray-400 ml-2`

3. Wrap in `<nav aria-label="Course navigation">` for accessibility

AVOID: Passing functions as props (not serializable). Import isSidebarOpen directly and call `.set()` in onClick.

NOTE: Props must be JSON-serializable for Astro islands. Map is NOT directly serializable - the parent Astro component must convert to array of [key, value] tuples, and Navigation must reconstruct if needed. Alternative: receive as array of objects with moduleId field.
  </action>
  <verify>
    - `cat src/components/Navigation.tsx` shows component with props
    - Component calls `isSidebarOpen.set(false)` on link clicks
    - Has current page highlighting logic
    - Has proper nav aria-label
  </verify>
  <done>
    - Navigation.tsx created with module grouping
    - Links close sidebar on click (mobile UX)
    - Current page highlighted with aria-current="page"
    - Accessible navigation structure
  </done>
</task>

</tasks>

<verification>
After both tasks:
1. `npm run build` completes without errors
2. Both components exist and export correctly
3. TypeScript compiles: `npx tsc --noEmit`
4. Components use nanostores (not React Context or useState for shared state)
</verification>

<success_criteria>
- MobileMenuToggle toggles sidebar state via nanostores
- Navigation displays module-grouped lessons with current page highlighting
- Navigation links close sidebar after click (mobile UX)
- Both components are accessible (ARIA attributes)
- Ready for integration in Plan 04 (BaseLayout update)
</success_criteria>

<output>
After completion, create `.planning/phases/02-navigation-roadmap/02-02-SUMMARY.md`
</output>
