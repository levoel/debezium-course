---
phase: 22-foundation-glass-design-system-module-naming
plan: 02
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - src/utils/moduleNames.ts
  - src/utils/navigation.ts
  - src/components/Navigation.tsx
  - src/layouts/BaseLayout.astro
  - src/pages/index.astro
autonomous: true

must_haves:
  truths:
    - "Sidebar displays descriptive module names instead of 'Модуль NN'"
    - "Homepage displays descriptive module groupings instead of flat lesson list"
    - "Sidebar has glass effect with blur and semi-transparent background"
    - "Glass sidebar uses 16px blur on desktop, 8px on mobile"
    - "Module names are consistent across sidebar and homepage"
  artifacts:
    - path: "src/utils/moduleNames.ts"
      provides: "Single source of truth for descriptive module names"
      exports: ["MODULE_NAMES", "getModuleName"]
    - path: "src/components/Navigation.tsx"
      provides: "Sidebar navigation with descriptive module names"
      contains: "getModuleName"
    - path: "src/layouts/BaseLayout.astro"
      provides: "Sidebar with glass-sidebar class"
      contains: "glass-sidebar"
    - path: "src/pages/index.astro"
      provides: "Homepage with module groupings and descriptive names"
      contains: "getModuleName"
  key_links:
    - from: "src/components/Navigation.tsx"
      to: "src/utils/moduleNames.ts"
      via: "import getModuleName"
      pattern: "import.*getModuleName.*from.*moduleNames"
    - from: "src/pages/index.astro"
      to: "src/utils/moduleNames.ts"
      via: "import getModuleName"
      pattern: "import.*getModuleName.*from.*moduleNames"
    - from: "src/layouts/BaseLayout.astro"
      to: "src/styles/global.css"
      via: "glass-sidebar class"
      pattern: "glass-sidebar"
---

<objective>
Apply glass effect to sidebar navigation and implement descriptive module names throughout the interface (sidebar, homepage).

Purpose: Transform the solid gray sidebar into a premium glass element and replace generic "Модуль N" labels with meaningful names that help users understand course structure at a glance.

Output: Glass-styled sidebar with descriptive module names, homepage organized by module with descriptive groupings.
</objective>

<execution_context>
@/Users/levoely/.claude/get-shit-done/workflows/execute-plan.md
@/Users/levoely/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/FEATURES_liquid-glass.md

# Depends on 22-01 for glass utilities
@.planning/phases/22-foundation-glass-design-system-module-naming/22-01-PLAN.md

# Key files to modify
@src/utils/navigation.ts
@src/components/Navigation.tsx
@src/layouts/BaseLayout.astro
@src/pages/index.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create module names configuration</name>
  <files>src/utils/moduleNames.ts</files>
  <action>
Create a new file `src/utils/moduleNames.ts` as the single source of truth for descriptive module names.

```typescript
/**
 * Descriptive module names for the Debezium course
 * Single source of truth - used by Navigation, Homepage, and Breadcrumbs
 *
 * Module directory naming convention: NN-module-N (e.g., "01-module-1", "03-module-3")
 */

/**
 * Map of module directory IDs to descriptive names (Russian)
 */
export const MODULE_NAMES: Record<string, string> = {
  '01-module-1': 'Введение в CDC',
  '02-module-2': 'PostgreSQL и Aurora',
  '03-module-3': 'MySQL и Aurora MySQL',
  '04-module-4': 'Production Operations',
  '05-module-5': 'SMT и Паттерны',
  '06-module-6': 'Data Engineering',
  '07-module-7': 'Cloud-Native GCP',
  '08-module-8': 'Capstone Project',
};

/**
 * Get descriptive name for a module
 * Falls back to formatted module ID if not found in mapping
 *
 * @param moduleId - Module directory name (e.g., "01-module-1")
 * @returns Descriptive module name in Russian
 */
export function getModuleName(moduleId: string): string {
  if (MODULE_NAMES[moduleId]) {
    return MODULE_NAMES[moduleId];
  }

  // Fallback: extract number and format as "Модуль NN"
  const match = moduleId.match(/^(\d+)/);
  if (match) {
    return `Модуль ${match[1].padStart(2, '0')}`;
  }

  return moduleId;
}

/**
 * Get module number from module ID
 * @param moduleId - Module directory name (e.g., "01-module-1")
 * @returns Module number as string (e.g., "01") or null
 */
export function getModuleNumber(moduleId: string): string | null {
  const match = moduleId.match(/^(\d+)/);
  return match ? match[1].padStart(2, '0') : null;
}
```

This provides:
- MODULE_NAMES constant for direct access
- getModuleName() function with fallback for unknown modules
- getModuleNumber() utility for formatting
  </action>
  <verify>
    1. File exists at src/utils/moduleNames.ts
    2. TypeScript compiles without errors: `npx tsc --noEmit`
    3. Contains all 8 module mappings
  </verify>
  <done>
    - MODULE_NAMES constant with all 8 descriptive module names
    - getModuleName() function with fallback behavior
    - getModuleNumber() utility function
    - Single source of truth for module naming
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Navigation component with glass styling and descriptive names</name>
  <files>src/components/Navigation.tsx</files>
  <action>
Update Navigation.tsx to use descriptive module names and prepare for glass styling.

**1. Add import for getModuleName at the top (after other imports):**
```typescript
import { getModuleName, getModuleNumber } from '../utils/moduleNames';
```

**2. Replace the formatModuleHeader function with one that uses descriptive names:**

Remove the existing `formatModuleHeader` function and replace with:
```typescript
/**
 * Format module header with number and descriptive name
 * "01-module-1" -> "01. Введение в CDC"
 */
function formatModuleHeader(moduleId: string): string {
  const number = getModuleNumber(moduleId);
  const name = getModuleName(moduleId);

  if (number) {
    return `${number}. ${name}`;
  }
  return name;
}
```

This changes the display from "Модуль 01" to "01. Введение в CDC".

**3. No other changes needed to Navigation.tsx** - the glass styling will be applied via the glass-sidebar class on the parent `<aside>` element in BaseLayout.astro.
  </action>
  <verify>
    1. Run `npm run build` - should complete without errors
    2. Run `npm run dev` and check sidebar shows "01. Введение в CDC" instead of "Модуль 01"
    3. All 8 modules display descriptive names
  </verify>
  <done>
    - Navigation imports getModuleName from moduleNames.ts
    - formatModuleHeader returns "NN. Descriptive Name" format
    - Sidebar displays descriptive module names
  </done>
</task>

<task type="auto">
  <name>Task 3: Apply glass effect to sidebar in BaseLayout</name>
  <files>src/layouts/BaseLayout.astro</files>
  <action>
Update BaseLayout.astro to apply the glass-sidebar class to the sidebar element.

**1. Find the aside element (sidebar) and update its classes:**

Current sidebar classes:
```html
<aside
  id="sidebar"
  class="
    fixed inset-y-0 left-0 z-50 w-64
    transform -translate-x-full transition-transform duration-300
    lg:relative lg:translate-x-0 lg:sticky lg:top-0 lg:h-screen
    bg-gray-800 border-r border-gray-700 overflow-y-auto
  "
>
```

Replace with (changes: remove bg-gray-800 border-r border-gray-700, add glass-sidebar):
```html
<aside
  id="sidebar"
  class="
    fixed inset-y-0 left-0 z-50 w-64
    transform -translate-x-full transition-transform duration-300
    lg:relative lg:translate-x-0 lg:sticky lg:top-0 lg:h-screen
    glass-sidebar overflow-y-auto
  "
>
```

The glass-sidebar class (from 22-01) provides:
- Semi-transparent dark background: rgba(0, 0, 0, 0.25)
- Backdrop blur: 10px (8px on mobile via media query)
- Right border: 1px solid rgba(255, 255, 255, 0.1)

**2. Update the sidebar header section to match glass aesthetic:**

Find:
```html
<div class="p-6 border-b border-gray-700">
```

Replace with:
```html
<div class="p-6 border-b border-white/10">
```

This changes the border to a subtle white border that matches the glass aesthetic.
  </action>
  <verify>
    1. Run `npm run dev` and visually inspect sidebar
    2. Sidebar should have glass effect (semi-transparent with blur)
    3. Gradient background should be visible through sidebar
    4. Text should remain readable (white on dark glass)
    5. Mobile: Open sidebar via hamburger menu - should also have glass effect
  </verify>
  <done>
    - Sidebar uses glass-sidebar class
    - Removed solid bg-gray-800 background
    - Border changed to white/10 for glass aesthetic
    - Glass effect visible with gradient showing through
    - Mobile sidebar also has glass effect (8px blur via media query)
  </done>
</task>

<task type="auto">
  <name>Task 4: Update homepage with module groupings and descriptive names</name>
  <files>src/pages/index.astro</files>
  <action>
Update index.astro to display lessons grouped by module with descriptive names instead of a flat list.

**1. Add imports at the top of the frontmatter:**
```typescript
import { getModuleName, getModuleNumber } from '../utils/moduleNames';
```

**2. Add module grouping logic after sortedLessons is defined:**
```typescript
// Group lessons by module
function groupByModule(lessons: typeof sortedLessons) {
  const groups = new Map<string, typeof sortedLessons>();

  for (const lesson of lessons) {
    // Extract module ID from lesson slug (e.g., "01-module-1/01-cdc-fundamentals" -> "01-module-1")
    const moduleId = cleanSlug(lesson.id).split('/')[0];

    if (!groups.has(moduleId)) {
      groups.set(moduleId, []);
    }
    groups.get(moduleId)!.push(lesson);
  }

  return groups;
}

const moduleGroups = groupByModule(sortedLessons);
const moduleIds = Array.from(moduleGroups.keys()).sort();
```

**3. Replace the lessons grid section with module-grouped display:**

Find the section starting with:
```html
<h2 class="text-2xl font-bold text-gray-100 mb-6">Уроки курса</h2>

<div class="grid gap-6 not-prose">
  {sortedLessons.map((lesson) => (
```

Replace the entire section (from `<h2>Уроки курса</h2>` to the closing `</div>` before the empty state check) with:

```astro
<h2 class="text-2xl font-bold text-gray-100 mb-6">Модули курса</h2>

<div class="space-y-8 not-prose">
  {moduleIds.map((moduleId) => {
    const lessons = moduleGroups.get(moduleId)!;
    const moduleNumber = getModuleNumber(moduleId);
    const moduleName = getModuleName(moduleId);

    return (
      <section key={moduleId} class="space-y-4">
        <h3 class="text-xl font-semibold text-gray-200 flex items-center gap-3">
          <span class="text-blue-400 font-mono">{moduleNumber}</span>
          <span>{moduleName}</span>
          <span class="text-sm text-gray-500 font-normal">({lessons.length} уроков)</span>
        </h3>

        <div class="grid gap-4 pl-4 border-l-2 border-blue-500/30">
          {lessons.map((lesson) => (
            <a
              href={`${import.meta.env.BASE_URL}/course/${cleanSlug(lesson.id)}`}
              class="block bg-gray-800/50 border border-gray-700/50 rounded-lg p-4 hover:border-blue-500/50 hover:bg-gray-800/70 transition-colors"
            >
              <div class="flex items-start justify-between mb-2">
                <h4 class="text-lg font-medium text-gray-100">
                  {lesson.data.title}
                </h4>
                <span class={`px-2 py-0.5 rounded-full text-xs font-medium border ${getDifficultyColor(lesson.data.difficulty)}`}>
                  {translateDifficulty(lesson.data.difficulty)}
                </span>
              </div>

              <p class="text-gray-400 text-sm mb-3 line-clamp-2">
                {lesson.data.description}
              </p>

              <div class="flex flex-wrap gap-3 text-xs text-gray-500">
                <div class="flex items-center gap-1">
                  <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <span>{lesson.data.estimatedTime} мин</span>
                </div>

                <div class="flex items-center gap-1 flex-wrap">
                  {lesson.data.topics.slice(0, 2).map((topic) => (
                    <span class="px-1.5 py-0.5 bg-gray-700/50 rounded text-xs">
                      {topic}
                    </span>
                  ))}
                  {lesson.data.topics.length > 2 && (
                    <span class="text-gray-600">
                      +{lesson.data.topics.length - 2}
                    </span>
                  )}
                </div>
              </div>
            </a>
          ))}
        </div>
      </section>
    );
  })}
</div>
```

Key changes:
- Lessons grouped by module with descriptive section headers
- Module number displayed in blue monospace font
- Descriptive module name displayed prominently
- Lesson count shown per module
- Left border creates visual grouping
- Lesson cards slightly smaller (p-4 vs p-6) for better density
- Description truncated to 2 lines
  </action>
  <verify>
    1. Run `npm run dev` and open homepage
    2. Lessons should be grouped under module headers
    3. Each module header shows: "01  Введение в CDC  (6 уроков)"
    4. Lessons within each module are indented with left border
    5. All 8 modules display with correct names
    6. Clicking lesson cards navigates correctly
  </verify>
  <done>
    - Homepage shows lessons grouped by module
    - Module headers display "NN + Descriptive Name + lesson count"
    - Descriptive names match sidebar
    - Visual grouping with left border
    - Lesson cards maintain functionality
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. **Module names consistency:**
   - Sidebar shows "01. Введение в CDC" (not "Модуль 01")
   - Homepage shows same descriptive names
   - All 8 modules have descriptive names

2. **Glass sidebar:**
   - Sidebar is semi-transparent (gradient visible through it)
   - Text remains readable
   - Desktop: 10px blur visible
   - Mobile: Sidebar glass effect works when opened

3. **Homepage structure:**
   - Lessons grouped by module
   - Each module has header with number + name + count
   - Lessons indented under module headers

4. **Build verification:**
   - `npm run build` passes
   - `npm run dev` renders correctly
</verification>

<success_criteria>
- [ ] src/utils/moduleNames.ts exists with MODULE_NAMES mapping for all 8 modules
- [ ] Sidebar displays "NN. Descriptive Name" format instead of "Модуль NN"
- [ ] Sidebar has glass effect (glass-sidebar class applied)
- [ ] Gradient background visible through sidebar
- [ ] Homepage lessons grouped by module
- [ ] Homepage module headers show descriptive names
- [ ] Module names consistent between sidebar and homepage
- [ ] npm run build passes without errors
- [ ] All navigation links work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/22-foundation-glass-design-system-module-naming/22-02-SUMMARY.md`
</output>
