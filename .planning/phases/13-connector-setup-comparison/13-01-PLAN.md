---
phase: 13-connector-setup-comparison
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/content/course/08-module-8/04-mysql-connector-configuration.mdx
autonomous: true

must_haves:
  truths:
    - "Learner can deploy MySQL CDC connector via Kafka Connect REST API"
    - "Learner understands MySQL-specific connector properties (database.server.id, schema.history.internal.*)"
    - "Learner can verify connector status and troubleshoot common deployment errors"
    - "CDC events flow from MySQL to Kafka topics with correct naming"
  artifacts:
    - path: "src/content/course/08-module-8/04-mysql-connector-configuration.mdx"
      provides: "MySQL connector configuration lesson"
      min_lines: 400
      contains: ["database.server.id", "schema.history.internal.kafka.topic", "curl.*8083/connectors"]
  key_links:
    - from: "04-mysql-connector-configuration.mdx"
      to: "Phase 12 lessons (01-03)"
      via: "prerequisites field"
      pattern: "prerequisites:.*03-binlog-retention-heartbeat"
---

<objective>
Create comprehensive MySQL CDC connector configuration lesson covering REST API deployment, MySQL-specific properties, and verification procedures.

Purpose: MYSQL-04 requires step-by-step MySQL connector setup in Docker Compose environment. This lesson teaches learners how to deploy and verify their first MySQL CDC connector.

Output: `src/content/course/08-module-8/04-mysql-connector-configuration.mdx` with complete deployment guide
</objective>

<execution_context>
@/Users/levoely/.claude/get-shit-done/workflows/execute-plan.md
@/Users/levoely/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/13-connector-setup-comparison/13-RESEARCH.md
@src/content/course/08-module-8/03-binlog-retention-heartbeat.mdx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MySQL connector configuration lesson</name>
  <files>src/content/course/08-module-8/04-mysql-connector-configuration.mdx</files>
  <action>
Create lesson file with frontmatter:
- title: "Настройка MySQL CDC коннектора"
- order: 4
- difficulty: intermediate
- estimatedTime: 30 minutes
- topics: mysql, debezium, kafka-connect, cdc
- prerequisites: module-8/03-binlog-retention-heartbeat

Content structure (Russian text, English code):

1. **Introduction** - Why connector setup differs from PostgreSQL
   - No replication slot (client-side position tracking)
   - database.server.id requirement for cluster membership
   - schema.history.internal.kafka.topic for DDL tracking

2. **Prerequisites Checklist** (brief, reference Phase 12)
   - MySQL running with binlog ROW format
   - GTID mode enabled
   - Heartbeat table configured
   - Debezium Connect service running

3. **Creating Schema History Topic** (CRITICAL - before connector)
   - Why infinite retention is mandatory (Pitfall 1 from research)
   - kafka-topics command with retention.ms=-1
   - Verification command

4. **Connector Configuration Properties** (detailed, table format)
   - Required properties (connector.class, database.*, table.include.list)
   - MySQL-specific properties (database.server.id - unique across cluster!)
   - Schema history properties (schema.history.internal.*)
   - Heartbeat properties (heartbeat.interval.ms, action.query)
   - Danger callout: database.server.id uniqueness (Pitfall 2)

5. **Deploying via REST API** (hands-on lab)
   - Create JSON config file
   - POST to :8083/connectors
   - Check status with GET
   - Verify topics created
   - Full curl commands with expected output

6. **Verifying CDC Event Flow** (hands-on)
   - INSERT test row in MySQL
   - Consume from Kafka topic
   - Examine event structure (before/after, source metadata)

7. **Troubleshooting Common Errors** (table format)
   - "server ID already in use" - cause and fix
   - "binlog_format is not ROW" - cause and fix
   - "db history topic is missing" - cause and fix
   - "Cannot replicate because master purged" - cause and fix

8. **Key Takeaways** (8-10 bullet points)

9. **What's Next** (preview binlog vs WAL comparison)

Use Mermaid for:
- Deployment sequence diagram (Create topic -> Configure -> Deploy -> Verify)
- CDC event flow diagram (MySQL -> Connector -> Kafka -> Consumer)

Use Callout components:
- type="danger" for server.id uniqueness, schema history retention
- type="tip" for verification commands
- type="warning" for deprecation (database.history.* -> schema.history.internal.*)
  </action>
  <verify>
```bash
# File exists with substantial content
wc -l src/content/course/08-module-8/04-mysql-connector-configuration.mdx
# Expected: 400+ lines

# Contains MySQL-specific properties
grep -c "database.server.id" src/content/course/08-module-8/04-mysql-connector-configuration.mdx
grep -c "schema.history.internal.kafka.topic" src/content/course/08-module-8/04-mysql-connector-configuration.mdx

# Contains REST API deployment
grep "curl.*8083/connectors" src/content/course/08-module-8/04-mysql-connector-configuration.mdx

# Contains troubleshooting section
grep -c "Troubleshoot" src/content/course/08-module-8/04-mysql-connector-configuration.mdx
```
  </verify>
  <done>Lesson covers: connector properties, REST API deployment, CDC verification, troubleshooting errors. Learner can deploy MySQL connector end-to-end.</done>
</task>

</tasks>

<verification>
```bash
# Lesson file exists and has proper frontmatter
head -20 src/content/course/08-module-8/04-mysql-connector-configuration.mdx | grep -E "^(title|order|difficulty):"

# Minimum content depth
wc -l src/content/course/08-module-8/04-mysql-connector-configuration.mdx

# Build passes (Astro can process MDX)
cd /Users/levoely/debezium\ course && npm run build 2>&1 | tail -5
```
</verification>

<success_criteria>
- Lesson file exists at src/content/course/08-module-8/04-mysql-connector-configuration.mdx
- Content is 400+ lines covering all sections
- Contains MySQL-specific properties (database.server.id, schema.history.internal.*)
- Contains REST API deployment commands (curl to :8083/connectors)
- Contains troubleshooting section with common errors
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-connector-setup-comparison/13-01-SUMMARY.md`
</output>
